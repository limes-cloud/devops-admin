(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44eb5392","chunk-5390c43f"],{"0201":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"字段名称"}},[r("el-input",{attrs:{placeholder:"请输入字段名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.field,callback:function(t){e.$set(e.queryParams,"field",t)},expression:"queryParams.field"}})],1),r("el-form-item",{attrs:{label:"类型名称"}},[r("el-input",{attrs:{placeholder:"请输入类型名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource:add",expression:"'configure:resource:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"configure:resource:page",expression:"'configure:resource:page'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"类型",align:"center",prop:"type","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"字段",align:"center",prop:"field","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"描述",align:"center",prop:"description","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"300","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource_value:query",expression:"'configure:resource_value:query'"}],attrs:{size:"mini",type:"text",icon:"el-icon-set-up"},on:{click:function(r){return e.handleUpdateValue(t.row)}}},[e._v("配置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource:service:query",expression:"'configure:resource:service:query'"}],attrs:{size:"mini",type:"text",icon:"el-icon-set-up"},on:{click:function(r){return e.handleQueryService(t.row)}}},[e._v("服务")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource:update",expression:"'configure:resource:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource:delete",expression:"'configure:resource:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"400px",title:e.insertDialog?"新增字段":"修改字段",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"类型名称",prop:"type"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入类型标志"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),r("el-form-item",{attrs:{label:"字段名称",prop:"field"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入字段标志"},model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}})],1),r("el-form-item",{attrs:{label:"子字段",prop:"child_field"}},[r("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入子字段标志"},model:{value:e.form.child_field,callback:function(t){e.$set(e.form,"child_field",t)},expression:"form.child_field"}},e._l(e.childFields,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"字段说明",prop:"description"}},[r("el-input",{attrs:{type:"textarea",size:"medium",autocomplete:"off",placeholder:"请输入字段说明"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1),r("el-dialog",{attrs:{width:"700px",title:"资源值配置",visible:e.valueDialog},on:{"update:visible":function(t){e.valueDialog=t}}},[r("el-form",{ref:"form",staticClass:"dialog-form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},e._l(e.envs,(function(t,a){return r("el-form-item",{key:a,attrs:{label:t.name+":"+t.keyword,prop:"type"}},e._l(e.envValues,(function(n,i){return r("div",{key:i},[n.env_keyword===t.keyword?r("el-input",{attrs:{size:"medium",type:"textarea",rows:4,autocomplete:"off",placeholder:"请输入值"},model:{value:e.envValues[a].value,callback:function(t){e.$set(e.envValues[a],"value",t)},expression:"envValues[index].value"}}):e._e()],1)})),0)})),1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.valueDialog=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource_value:update",expression:"'configure:resource_value:update'"}],attrs:{type:"primary"},on:{click:e.updateFieldValue}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{width:"400px",title:"资源服务配置",visible:e.serviceDialog},on:{"update:visible":function(t){e.serviceDialog=t}}},[r("el-form",{ref:"form",staticClass:"dialog-form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{prop:"service_ids"}},[r("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入服务名称","remote-method":e.getServices,loading:e.loading},model:{value:e.service_keywords,callback:function(t){e.service_keywords=t},expression:"service_keywords"}},e._l(e.serviceList,(function(e){return r("el-option",{key:e.keyword,attrs:{label:e.keyword,value:e.keyword}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.serviceDialog=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:resource:service:update",expression:"'configure:resource:service:update'"}],attrs:{type:"primary"},on:{click:e.updateResourceService}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("e9c4"),r("96cf"),r("ed84")),o=r("53d2"),l=r("b775");function c(e){return Object(l["a"])({url:"configure/resource/page",method:"get",params:e})}function u(e){return Object(l["a"])({url:"configure/resource",method:"post",data:e})}function d(e){return Object(l["a"])({url:"configure/resource",method:"put",data:e})}function m(e){return Object(l["a"])({url:"configure/resource",method:"delete",data:e})}function p(e){return Object(l["a"])({url:"configure/resource/value",method:"get",params:e})}function f(e){return Object(l["a"])({url:"configure/resource/value",method:"post",data:e})}function g(e){return Object(l["a"])({url:"configure/resource/service",method:"get",params:e})}function v(e){return Object(l["a"])({url:"configure/resource/service",method:"post",data:e})}var h={data:function(){return{envs:[],list:[],form:{},loading:!0,envValues:[],dialog:!1,serviceList:[],service_keywords:[],serviceDialog:!1,updateDialog:!1,insertDialog:!1,valueDialog:!1,queryParams:{page:1,count:10,service_name:void 0},total:0,config:{},childFields:[],rules:{type:[{required:!0,trigger:"blur",message:"字段类型不能为空"}],field:[{required:!0,trigger:"blur",message:"字段标志不能为空"},{type:"string",pattern:/^[_a-zA-Z][_a-zA-Z0-9]+$/,trigger:"blur",message:"字段名不合法"}],child_field:[{required:!0,trigger:"blur",message:"字段类型不能为空"}],description:[{required:!0,trigger:"blur",message:"字段描述不能为空"}]}}},computed:{},created:function(){this.getList(),this.getEnvs()},methods:{getEnvs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])({status:!0});case 2:for(r in e.envs=t.sent,e.envs)e.envValues.push({});case 4:case"end":return t.stop()}}),t)})))()},getServices:function(e){var t=this;e&&e.length?Object(o["f"])({page:1,count:10,name:e}).then((function(e){t.serviceList=e.list})):this.serviceList=[]},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c(e.queryParams);case 2:r=t.sent,e.list=r.list,e.loading=!1,e.total=r.total;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,keyword:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleAdd:function(){this.form={},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleQueryService:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.form=t.deepClone(e),t.service_keywords=[],r.next=4,g({resource_id:e.id});case 4:for(n in a=r.sent,a)t.service_keywords.push(a[n].service_keyword);t.$forceUpdate(),t.serviceDialog=!0;case 8:case"end":return r.stop()}}),r)})))()},updateResourceService:function(e){var t=this;v({resource_id:this.form.id,service_keywords:this.service_keywords}).then((function(e){t.$message({type:"success",message:"服务挂载成功!"}),t.getList(),t.serviceDialog=!1}))},handleUpdateValue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.form=t.deepClone(e),r.next=3,p({resource_id:e.id});case 3:for(n in a=r.sent,t.envValues=[],t.envs){for(s in i=!1,a)t.envs[n].keyword==a[s].env_keyword&&(t.envValues.push(a[s]),i=!0);i||t.envValues.push({env_keyword:t.envs[n].keyword,value:""})}t.valueDialog=!0;case 7:case"end":return r.stop()}}),r)})))()},updateFieldValue:function(){var e=this,t=function(t){for(var r in e.envs)if(e.envs[r].id==t)return e.envs[r].name+"["+e.envs[r].keyword+"]";return""},r=0;try{var a=JSON.parse(this.form.child_field);for(r in this.envValues){var n=JSON.parse(this.envValues[r].value);for(var i in a)if(!n[a[i]])return void this.$message({type:"error",message:t(this.envValues[r].env_id)+"不存在字段:"+a[i]})}}catch(s){return void this.$message({type:"error",message:t(this.envValues[r].env_id)+"存在非json数据值"})}f({data:this.envValues,resource_id:this.form.id}).then((function(t){e.$message({message:"更新成功",type:"success"}),e.valueDialog=!1}))},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.form=this.deepClone(e),this.form.child_field?this.form.child_field=this.childFields=JSON.parse(this.form.child_field):this.form.child_field=this.childFields=[],this.dialog=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该服务, 是否继续?","提示",{type:"warning"}).then((function(){m({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this,t=this.deepClone(this.form);t.child_field=JSON.stringify(t.child_field),this.$refs.form.validate((function(r){r&&u(t).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}))},update:function(){var e=this,t=this.deepClone(this.form);t.child_field=JSON.stringify(t.child_field),this.$refs.form.validate((function(r){r&&d(t).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}))}}},b=h,y=(r("bcda"),r("2877")),_=Object(y["a"])(b,a,n,!1,null,"9f67119a",null);t["default"]=_.exports},"0329":function(e,t,r){},"0868":function(e,t,r){"use strict";r("6bb6")},1206:function(e,t,r){},"122a":function(e,t,r){},"18dd":function(e,t,r){"use strict";r("a507")},"1a27":function(e,t,r){"use strict";r("a5e5")},"1b55":function(e,t,r){},"1cd3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"服务名称"}},[r("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.querySelect,clear:e.querySelect},model:{value:e.queryTempValue,callback:function(t){e.queryTempValue=t},expression:"queryTempValue"}})],1),r("el-form-item",{attrs:{label:"选择环境",prop:"env_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParams.env_id,callback:function(t){e.$set(e.queryParams,"env_id",t)},expression:"queryParams.env_id"}},e._l(e.envs,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:network:add",expression:"'service:network:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:network:page",expression:"'service:network:page'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"网络host",align:"center",prop:"host","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:network:update",expression:"'service:network:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:network:delete",expression:"'service:network:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"500px",title:e.insertDialog?"新增代码网络配置":"修改代码网络配置",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px",rules:e.rules}},[r("el-form-item",{attrs:{label:"网络host",prop:"host"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入network名称"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),r("el-form-item",{attrs:{label:"所属服务"}},[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.formSelect,clear:e.formSelect},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1),r("el-form-item",{attrs:{label:"所属环境",prop:"env_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.env_id,callback:function(t){e.$set(e.form,"env_id",t)},expression:"form.env_id"}},e._l(e.envs,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"是否开启https",prop:"open_https"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.open_https,callback:function(t){e.$set(e.form,"open_https",t)},expression:"form.open_https"}},[r("el-option",{attrs:{label:"开启",value:!0}}),r("el-option",{attrs:{label:"关闭",value:!1}})],1)],1),e.form.open_https?r("el-form-item",{attrs:{label:"证书公钥",prop:"cert"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.cert,callback:function(t){e.$set(e.form,"cert",t)},expression:"form.cert"}})],1):e._e(),e.form.open_https?r("el-form-item",{attrs:{label:"证书密钥",prop:"key"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1):e._e(),e.form.open_https?r("el-form-item",{attrs:{label:"是否强制https",prop:"redirect"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.redirect,callback:function(t){e.$set(e.form,"redirect",t)},expression:"form.redirect"}},[r("el-option",{attrs:{label:"开启",value:!0}}),r("el-option",{attrs:{label:"关闭",value:!1}})],1)],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("96cf"),r("53d2")),o=r("ed84"),l=r("b775");function c(e){return Object(l["a"])({url:"service/network/page",method:"get",params:e})}function u(e){return Object(l["a"])({url:"service/network",method:"post",data:e})}function d(e){return Object(l["a"])({url:"service/network",method:"put",data:e})}function m(e){return Object(l["a"])({url:"service/network",method:"delete",data:e})}var p={data:function(){return{queryTempValue:"",tempValue:"",envs:[],list:[],form:{},templateDialog:!1,dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,rules:{host:[{required:!0,trigger:"blur",message:"网络host不能为空"}],srv_id:[{required:!0,trigger:"blur",message:"所属服务不能为空"}],env_id:[{required:!0,trigger:"blur",message:"所属环境不能为空"}]},total:0,queryParams:{page:1,count:10}}},computed:{},created:function(){this.getList(),this.getEnvs()},methods:{handleSelectService:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&e.id){r.next=3;break}return t.resetQuery(),r.abrupt("return");case 3:if(t.form.service_keyword!=e.keyword){r.next=5;break}return r.abrupt("return");case 5:return t.valueLoading=!1,t.queryParams.service_keyword=e.keyword,t.form.service_keyword=e.keyword,r.next=10,getReleaseImages({service_keyword:e.keyword});case 10:t.images=r.sent;case 11:case"end":return r.stop()}}),r)})))()},querySearchAsync:function(e,t){if(!e||!e.length)return[];this.getServices(e).then((function(e){for(var r in e.list)e.list[r].show_name=e.list[r].name+"("+e.list[r].keyword+")";t(e.list)}))},querySelect:function(e){e&&e.id&&(this.queryParams.srv_id=e.id)},formSelect:function(e){e&&e.id&&(this.form.srv_id=e.id)},getEnvs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])();case 2:e.envs=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c(e.queryParams);case 2:r=t.sent,e.list=r.list,e.total=r.total,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},getServices:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["f"])({page:1,count:10,name:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleTemplate:function(e){this.template=e.template,this.templateDialog=!0},handleAdd:function(){this.form={},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.insertDialog=!1,t.updateDialog=!0,""!=e.cert?e.open_https=!0:e.open_https=!1,t.form=t.deepClone(e),r.next=6,Object(s["f"])({id:t.form.id,page:1,count:1});case 6:a=r.sent,t.tempValue=a.list[0].name+"("+a.list[0].keyword+")",t.dialog=!0;case 9:case"end":return r.stop()}}),r)})))()},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该网络配置, 是否继续?","提示",{type:"warning"}).then((function(){m({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);u(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},update:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);d(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},f=p,g=(r("4619"),r("2877")),v=Object(g["a"])(f,a,n,!1,null,"4b666406",null);t["default"]=v.exports},"1db4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wscn-http404-container"},[r("div",{staticClass:"wscn-http404"},[e._m(0),r("div",{staticClass:"bullshit"},[r("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._m(1),r("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),r("div",{staticClass:"bullshit__info"},[e._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),r("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("Back to home")])])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pic-404"},[a("img",{staticClass:"pic-404__parent",attrs:{src:r("a36b"),alt:"404"}}),a("img",{staticClass:"pic-404__child left",attrs:{src:r("26fc"),alt:"404"}}),a("img",{staticClass:"pic-404__child mid",attrs:{src:r("26fc"),alt:"404"}}),a("img",{staticClass:"pic-404__child right",attrs:{src:r("26fc"),alt:"404"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bullshit__info"},[e._v("All rights reserved "),r("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[e._v("wallstreetcn")])])}],i={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},s=i,o=(r("35e7"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"26fcd89f",null);t["default"]=l.exports},"1f34":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{directives:[{name:"permission",rawName:"v-permission",value:"system:user:page",expression:"'system:user:page'"}],staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"人员名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入人员名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入电话号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.phone,callback:function(t){e.$set(e.queryParams,"phone",t)},expression:"queryParams.phone"}})],1),r("el-form-item",{attrs:{label:"用户邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入用户邮箱",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.email,callback:function(t){e.$set(e.queryParams,"email",t)},expression:"queryParams.email"}})],1),r("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[r("el-option",{attrs:{label:"正常",value:!0}}),r("el-option",{attrs:{label:"禁用",value:!1}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1),r("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:"system:user:add",expression:"'system:user:add'"}]},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.List}},[r("el-table-column",{attrs:{label:"姓名",width:"100",align:"center",prop:"name"}}),r("el-table-column",{attrs:{label:"电话",align:"center",prop:"phone","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"邮箱",align:"center",prop:"email","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"部门",align:"center",prop:"role.name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"角色",align:"center",prop:"team.name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"状态",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{disabled:1===t.row.id,"active-text":"正常","inactive-text":"禁用"},on:{change:function(r){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center",prop:"created_at","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!==t.row.id?r("div",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:user:update",expression:"'system:user:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:user:delete",expression:"'system:user:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])],1):e._e()]}}])})],1),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:e.insertDialog?"新增人员":"修改人员",visible:e.Dialog,width:"500px"},on:{"update:visible":function(t){e.Dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"人员名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入人员名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入联系电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入电子邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[r("el-radio",{attrs:{label:!0}},[e._v("男")]),r("el-radio",{attrs:{label:!1}},[e._v("女")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属角色",prop:"role_id"}},[r("el-select",{attrs:{disabled:1==e.form.role_id&&1==e.form.id,size:"medium",placeholder:"请选择所属角色"},model:{value:e.form.role_id,callback:function(t){e.$set(e.form,"role_id",t)},expression:"form.role_id"}},e._l(e.roleList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[e.insertDialog?r("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入登录密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),e.updateDialog?r("el-form-item",{attrs:{label:"登录密码"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入登录密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"账号状态"}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-radio",{attrs:{label:!0}},[e._v("正常")]),r("el-radio",{attrs:{label:!1}},[e._v("禁用")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属部门",prop:"team_id"}},[r("el-cascader",{attrs:{props:{label:"name",value:"id",checkStrictly:!0},options:e.teamList,clearable:""},on:{change:e.chooseTeam},model:{value:e.form.team_id,callback:function(t){e.$set(e.form,"team_id",t)},expression:"form.team_id"}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.Dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertData}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("96cf"),r("c0c7")),o=r("3528"),l=r("bd46"),c=(r("a199"),{name:"User",data:function(){return{loading:!0,uploading:!1,uploadtext:"",queryParams:{page:1,count:10,name:void 0,phone:void 0,status:void 0},List:[],total:0,updateDialog:!1,insertDialog:!1,Dialog:!1,form:{},roleList:[],teamList:[],rules:{sex:[{required:!0,message:"人员性别不能为空",trigger:"blur"}],name:[{required:!0,message:"人员名称不能为空",trigger:"blur"}],phone:[{required:!0,message:"联系电话不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:"blur"}],role_id:[{required:!0,message:"所属角色不能为空",trigger:"blur"}],team_id:[{required:!0,message:"所属部门不能为空",trigger:"blur"}],password:[{required:!0,message:"登录密码不能为空",trigger:"blur"}]}}},created:function(){this.getList(),this.getRolesAndTeams()},methods:{getRolesAndTeams:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["g"])();case 2:return e.roleList=t.sent,t.next=5,Object(l["c"])();case 5:r=t.sent,e.teamList=[r];case 7:case"end":return t.stop()}}),t)})))()},chooseTeam:function(e){e&&(this.form.team_id=e[e.length-1])},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])(e.queryParams);case 2:r=t.sent,e.List=r.list,e.loading=!1,e.total=r.total;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,name:void 0,phone:void 0,status:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleStatusChange:function(e){var t=this,r=!1===e.status?"禁用":"启用";this.$confirm("确认要"+r+'"'+e.name+'"用户吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["h"])(e)})).then((function(){t.$message({message:r+"成功",type:"success"})})).catch((function(){e.status=!1===e.status}))},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该用户, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["c"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()}))}))},handleAdd:function(){this.form={status:!0,avatar:"/static/logo.png"},this.updateDialog=!1,this.Dialog=this.insertDialog=!0},handleUpdate:function(e){this.Dialog=this.updateDialog=!0,this.insertDialog=!1,this.form=this.deepClone(e)},insertData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["a"])(e.form).then((function(t){e.$message({message:"添加成功",type:"success"}),e.getList(),e.insertDialog=e.Dialog=!1}))}))},updateData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["h"])(e.form).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.updateDialog=e.Dialog=!1}))}))}}}),u=c,d=r("2877"),m=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=m.exports},2241:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.List,"default-expand-all":"","row-key":"id","expand-row-keys":[1],"tree-props":{children:"children"}}},[r("el-table-column",{attrs:{label:"部门类型",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0,width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("parseTime")(t.row.created_at))+" ")]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0,width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("parseTime")(t.row.updated_at))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"240","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:team:add",expression:"'system:team:add'"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(r){return e.handleAdd(t.row)}}},[e._v("新增")]),1!=t.row.id?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:team:update",expression:"'system:team:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]):e._e(),1!=t.row.id?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:team:delete",expression:"'system:team:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),r("el-dialog",{attrs:{title:e.insertDialog?"新增部门":"修改部门",visible:e.Dialog,width:"600px"},on:{"update:visible":function(t){e.Dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"上级菜单"}},[r("el-autocomplete",{attrs:{value:e.parentTitle,placeholder:"请输入内容","fetch-suggestions":e.getTeamList},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item;return[r("el-tree",{attrs:{data:a,props:{children:"children",label:"name"}},on:{"node-click":e.handleNodeClick}})]}}])})],1),r("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"部门描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.Dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertData}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("b0c0"),r("bd46")),o={name:"Team",data:function(){return{loading:!0,uploading:!1,uploadtext:"",List:[],Dialog:!1,updateDialog:!1,insertDialog:!1,parentTitle:"",form:{},rules:{name:[{required:!0,trigger:"blur",message:"部门名称不能为空"}],parent_id:[{required:!0,trigger:"blur",message:"部门类型不能为空"}]}}},created:function(){this.getList()},methods:{handleNodeClick:function(e){this.parentTitle=e.name,this.form.parent_id=e.id},getTeamList:function(e,t){t([this.List])},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])();case 2:r=t.sent,e.List=[r],e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},handleAdd:function(e){this.form={avatar:"/static/logo.png"},this.insertDialog=this.Dialog=!0,this.updateDialog=!1,this.parentTitle=e.name,this.form.parent_id=e.id},handleUpdate:function(e){var t=this.getTreeNode(this.List[0],e.parent_id);t&&(this.parentTitle=t.name),this.updateDialog=this.Dialog=!0,this.insertDialog=!1,this.form=this.deepClone(e)},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该部门, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除部门成功"}),t.getList()}))}))},insertData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["a"])(e.form).then((function(t){e.$message({message:"新增部门成功",type:"success"}),e.getList(),e.Dialog=!1}))}))},updateData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["d"])(e.form).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.Dialog=!1}))}))}}},l=o,c=(r("6344"),r("9661"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"3084fd34",null);t["default"]=u.exports},"24e2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"errPage-container"},[r("el-button",{staticClass:"pan-back-btn",attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v(" 返回 ")]),r("el-row",[r("el-col",{attrs:{span:12}},[r("h1",{staticClass:"text-jumbo text-ginormous"},[e._v(" Oops! ")]),e._v(" gif来源"),r("a",{attrs:{href:"https://zh.airbnb.com/",target:"_blank"}},[e._v("airbnb")]),e._v(" 页面 "),r("h2",[e._v("你没有权限去该页面")]),r("h6",[e._v("如有不满请联系你领导")]),r("ul",{staticClass:"list-unstyled"},[r("li",[e._v("或者你可以去:")]),r("li",{staticClass:"link-type"},[r("router-link",{attrs:{to:"/dashboard"}},[e._v(" 回首页 ")])],1),r("li",{staticClass:"link-type"},[r("a",{attrs:{href:"https://www.taobao.com/"}},[e._v("随便看看")])]),r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.dialogVisible=!0}}},[e._v("点我看图")])])])]),r("el-col",{attrs:{span:12}},[r("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1),r("el-dialog",{attrs:{visible:e.dialogVisible,title:"随便看"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{staticClass:"pan-img",attrs:{src:e.ewizardClap}})])],1)},n=[],i=r("cc6c"),s=r.n(i),o={name:"Page401",data:function(){return{errGif:s.a+"?"+ +new Date,ewizardClap:"https://wpimg.wallstcn.com/007ef517-bafd-4066-aae4-6883632d9646",dialogVisible:!1}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)}}},l=o,c=(r("1a27"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"35ca77fc",null);t["default"]=u.exports},2651:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{directives:[{name:"permission",rawName:"v-permission",value:"configure:environment:add",expression:"'configure:environment:add'"}],attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAddEnv}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"configure:environment:all",expression:"'configure:environment:all'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"标志符",align:"center",prop:"env_keyword","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"环境名",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.envName(t.row.env_keyword))+" ")]}}])}),r("el-table-column",{attrs:{label:"中间件",align:"center",prop:"drive","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"存储前缀",align:"center",prop:"prefix","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:environment:connect",expression:"'configure:environment:connect'"}],attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-sort"},on:{click:function(r){return e.handleConnectEnv(t.row)}},slot:"reference"},[e._v(" 连接测试 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:environment:update",expression:"'configure:environment:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdateEnv(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:environment:delete",expression:"'configure:environment:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDeleteEnv(t.row)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{width:"400px",title:e.insertEnvDialog?"新增环境配置":"修改环境配置",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"所属环境",prop:"env_keyword",size:"medium"}},[e.insertEnvDialog?r("el-select",{model:{value:e.form.env_keyword,callback:function(t){e.$set(e.form,"env_keyword",t)},expression:"form.env_keyword"}},e._l(e.createEnvs,(function(t,a){return r("el-option",{key:a,attrs:{label:t.name,value:t.keyword}},[e._v(e._s(t.name))])})),1):r("el-select",{attrs:{disabled:""},model:{value:e.form.env_keyword,callback:function(t){e.$set(e.form,"env_keyword",t)},expression:"form.env_keyword"}},e._l(e.envs,(function(t,a){return r("el-option",{key:a,attrs:{label:t.name,value:t.keyword}},[e._v(e._s(t.name))])})),1)],1),r("el-form-item",{attrs:{label:"路径前缀",prop:"prefix"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入路径前缀"},model:{value:e.form.prefix,callback:function(t){e.$set(e.form,"prefix",t)},expression:"form.prefix"}})],1),r("el-form-item",{attrs:{label:"中间件",prop:"drive"}},[r("el-select",{model:{value:e.form.drive,callback:function(t){e.$set(e.form,"drive",t)},expression:"form.drive"}},e._l(e.driveList,(function(t,a){return r("el-option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",{attrs:{label:"连接token",prop:"token"}},[r("el-input",{model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1),r("el-form-item",{attrs:{label:"连接配置",prop:"config"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.config,callback:function(t){e.$set(e.form,"config",t)},expression:"form.config"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertEnvDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertEnv}},[e._v("确 定")]):e._e(),e.updateEnvDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateEnv}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("b0c0"),r("e9c4"),r("ed84")),o=r("b775");function l(e){return Object(o["a"])({url:"configure/environments",method:"get",params:e})}function c(e){return Object(o["a"])({url:"configure/environment",method:"post",data:e})}function u(e){return Object(o["a"])({url:"configure/environment",method:"put",data:e})}function d(e){return Object(o["a"])({url:"configure/environment",method:"delete",data:e})}function m(e){return Object(o["a"])({url:"configure/environment/connect",method:"post",data:e})}var p={data:function(){return{driveList:["etcd","consul","zk"],list:[],form:{},envs:[],createEnvs:[],dialog:!1,updateEnvDialog:!1,insertEnvDialog:!1,loading:!0,rules:{env_keyword:[{required:!0,trigger:"blur",message:"所属环境不能为空"}],drive:[{required:!0,trigger:"blur",message:"环境中间件不能为空"}],config:[{required:!0,trigger:"blur",message:"配置不能为空"}],prefix:[{required:!0,trigger:"blur",message:"路径前缀不能为空"}]},connectStatus:void 0}},computed:{envName:function(){return function(e){for(var t in this.envs)if(this.envs[t].keyword===e)return this.envs[t].name}}},created:function(){this.Envs()},methods:{Envs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:e.envs=t.sent,e.getEnvs();case 4:case"end":return t.stop()}}),t)})))()},getEnvs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:for(a in e.list=t.sent,e.createEnvs=[],r=[],e.list)r.push(e.list[a].env_keyword);for(n in e.envs)-1===r.indexOf(e.envs[n].keyword)&&e.createEnvs.push(e.envs[n]);e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},handleConnectEnv:function(e){var t=this,r=this.$loading({lock:!0,text:"连接测试中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});m({keyword:e.env_keyword}).then((function(e){t.$message({type:"success",message:"连接成功!"}),r.close()})).catch((function(){r.close()}))},handleAddEnv:function(){this.form={status:!0,weight:0},this.insertEnvDialog=!0,this.updateEnvDialog=!1,this.dialog=!0},handleUpdateEnv:function(e){this.insertEnvDialog=!1,this.updateEnvDialog=!0,this.dialog=!0,this.form=JSON.parse(JSON.stringify(e))},handleDeleteEnv:function(e){var t=this;this.$confirm("此操作将删除该环境, 是否继续?","提示",{type:"warning"}).then((function(){d({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getEnvs()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insertEnv:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);c(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getEnvs(),e.dialog=!1}))}}))},updateEnv:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);u(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getEnvs(),e.dialog=!1}))}}))}}},f=p,g=(r("334a"),r("2877")),v=Object(g["a"])(f,a,n,!1,null,"7dc22638",null);t["default"]=v.exports},"26fc":function(e,t,r){e.exports=r.p+"static/img/404_cloud.0f4bc32b.png"},2964:function(e,t,r){},"2a7c":function(e,t,r){},"2ccf":function(e,t,r){"use strict";r("3360")},"307e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"notice:channel:query",expression:"'notice:channel:query'"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"通道名称"}},[r("el-input",{attrs:{placeholder:"请输入通道名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",{attrs:{label:"通道状态"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[r("el-option",{attrs:{label:"正常",value:"true"}}),r("el-option",{attrs:{label:"禁用",value:"false"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{directives:[{name:"permission",rawName:"v-permission",value:"notice:channel:add",expression:"'notice:channel:add'"}],attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"通道ID",align:"center",prop:"id","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"通道名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"通道配置",align:"center",prop:"config","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"通道状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?r("el-tag",[e._v("开启")]):r("el-tag",{attrs:{type:"info"}},[e._v("禁用")])]}}])}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"更新时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"notice:channel:update",expression:"'notice:channel:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"notice:channel:delete",expression:"'notice:channel:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{title:e.insertDialog?"新增通道":"修改通道’",visible:e.dialog,width:"400px"},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"通道名称"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入通道名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"通道配置"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入权限标识"},model:{value:e.form.config,callback:function(t){e.$set(e.form,"config",t)},expression:"form.config"}})],1),e.updateDialog?r("el-form-item",{attrs:{label:"通道状态"}},[r("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.insertData()}}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("7760")),o={data:function(){return{list:[],form:{},dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,queryParams:{page:1,count:10,name:null,status:null},total:0,rules:{name:[{required:!0,trigger:"blur",message:"通道名称不能为空"}],config:[{required:!0,trigger:"blur",message:"通道配置不能为空"}]}}},computed:{},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])(e.queryParams);case 2:e.list=t.sent,e.loading=!1,e.total=e.list.length;case 5:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10}},handleAdd:function(){this.form={status:!1},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.dialog=!0,this.form=this.deepClone(e)},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该通道, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insertData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["a"])(e.form).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}))},updateData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["e"])(e.form).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}))}}},l=o,c=(r("b277"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"111897a5",null);t["default"]=u.exports},"334a":function(e,t,r){"use strict";r("d2e9")},3360:function(e,t,r){},"35e7":function(e,t,r){"use strict";r("122a")},3683:function(e,t,r){},3972:function(e,t,r){"use strict";r("abe7")},"3b53":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"服务名称"}},[r("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.handleSelect,clear:e.handleSelect},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1),r("el-form-item",{attrs:{label:"服务标志"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.service_keyword,callback:function(t){e.$set(e.queryParams,"service_keyword",t)},expression:"queryParams.service_keyword"}})],1),r("el-form-item",{attrs:{label:"执行状态",prop:"is_finish"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.is_finish,callback:function(t){e.$set(e.queryParams,"is_finish",t)},expression:"queryParams.is_finish"}},[r("el-option",{attrs:{label:"进行中",value:!0}}),r("el-option",{attrs:{label:"执行完成",value:!1}})],1)],1),r("el-form-item",{attrs:{label:"发布状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.status,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),r("el-form-item",{attrs:{label:"发布时间"}},[r("el-date-picker",{attrs:{size:"small","value-format":"timestamp",clearable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.chooseTime},model:{value:e.startandend,callback:function(t){e.startandend=t},expression:"startandend"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:release_log:add",expression:"'service:release_log:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:release_log:page",expression:"'service:release_log:page'"}],attrs:{data:e.List}},[r("el-table-column",{attrs:{label:"服务名称",align:"center",prop:"service_name"}}),r("el-table-column",{attrs:{label:"镜像仓库",align:"center",prop:"image_registry_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"镜像名",align:"center",prop:"image_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"发布时长",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.use_time)+"秒")])]}}])}),r("el-table-column",{attrs:{label:"执行状态",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_finish?r("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):r("el-tag",{attrs:{type:"danger"}},[e._v("进行中")])]}}])}),r("el-table-column",{attrs:{label:"发布详情",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"left",width:"400",trigger:"click"}},[r("div",{staticClass:"desc-box"},e._l(e.getDescList(t.row.desc),(function(t,a){return r("div",{key:a,staticClass:"desc-item"},[e._v(" "+e._s(a+1)+" : "+e._s(t)+" ")])})),0),r("el-button",{attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-tickets"},slot:"reference"},[e._v("查看")])],1)]}}])}),r("el-table-column",{attrs:{label:"发布状态",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return["success"==t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.status[t.row.status]))]):e._e(),"fail"==t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.status[t.row.status]))]):e._e(),"check"==t.row.status?r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.status[t.row.status]))]):e._e()]}}])}),r("el-table-column",{attrs:{label:"发布时间",align:"center",prop:"created_at","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"400px",title:"服务发布",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"服务名称",prop:"keyword"}},[r("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.handleSelectService,clear:e.handleSelectService},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1),r("el-form-item",{attrs:{label:"选择镜像",prop:"pack_id"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.pack_id,callback:function(t){e.$set(e.form,"pack_id",t)},expression:"form.pack_id"}},e._l(e.images,(function(t,a){return r("el-option",{key:a,attrs:{label:t.image_name+"（"+e.parseTime(t.created_at)+"）",value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"发布环境",prop:"env_keyword"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.env_keyword,callback:function(t){e.$set(e.form,"env_keyword",t)},expression:"form.env_keyword"}},e._l(e.envs,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.keyword}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("ac1f"),r("1276"),r("b0c0"),r("96cf"),r("b775"));function o(e){return Object(s["a"])({url:"service/release_log/page",method:"get",params:e})}function l(e){return Object(s["a"])({url:"service/release_log",method:"post",data:e})}var c=r("cb81"),u=r("53d2"),d=r("ed84"),m={name:"User",data:function(){return{tempValue:"",startandend:[],loading:!1,images:[],queryParams:{page:1,count:10,keyword:void 0},List:[],total:0,dialog:!1,form:{},status:{},envs:[],rules:{service_keyword:[{required:!0,trigger:"blur",message:"服务名称不能为空"}],env_keyword:[{required:!0,trigger:"blur",message:"发布环境"}],pack_id:[{required:!0,trigger:"blur",message:"发布镜像"}]}}},created:function(){this.getStatus(),this.getEnvs()},methods:{handleSelectService:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&e.id){r.next=3;break}return t.resetQuery(),r.abrupt("return");case 3:if(t.form.service_keyword!=e.keyword){r.next=5;break}return r.abrupt("return");case 5:return t.valueLoading=!1,t.queryParams.service_keyword=e.keyword,t.form.service_keyword=e.keyword,r.next=10,Object(c["c"])({service_keyword:e.keyword});case 10:t.images=r.sent;case 11:case"end":return r.stop()}}),r)})))()},getStatus:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:e.status=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getEnvs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["d"])();case 2:e.envs=t.sent;case 3:case"end":return t.stop()}}),t)})))()},handleAdd:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.service_keyword!=e.queryParams.service_keyword&&(e.form={}),e.form.service_keyword||!e.queryParams.service_keyword){t.next=6;break}return e.form.service_keyword=e.queryParams.service_keyword,t.next=5,Object(c["c"])({service_keyword:item.keyword});case 5:e.images=t.sent;case 6:e.dialog=!0;case 7:case"end":return t.stop()}}),t)})))()},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);l(r).then((function(t){e.$message({message:"请求发布成功",type:"success"}),e.dialog=!1,e.getList()}))}}))},getDescList:function(e){return e?e.split("\n"):[]},getServices:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["f"])({page:1,count:10,name:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},querySearchAsync:function(e,t){if(!e||!e.length)return[];this.getServices(e).then((function(e){for(var r in e.list)e.list[r].show_name=e.list[r].name+"("+e.list[r].keyword+")";t(e.list)}))},handleSelect:function(e){e&&e.id?(this.queryParams.service_keyword=e.keyword,this.getList()):this.resetQuery()},chooseTime:function(e){this.queryParams.start=e[0]/1e3,this.queryParams.end=e[1]/1e3},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.queryParams.keyword&&(e.List=[],e.loading=!1,e.total=0),t.next=3,o(e.queryParams);case 3:r=t.sent,e.List=r.list,e.loading=!1,e.total=r.total;case 7:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,start:void 0,end:void 0,status:void 0},this.startandend=[]},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()}}},p=m,f=(r("2ccf"),r("2877")),g=Object(f["a"])(p,a,n,!1,null,"f0733d9c",null);t["default"]=g.exports},"3f10":function(e,t,r){"use strict";r("0329")},4022:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"header-nav"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:list",expression:"'system:role:list'"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"服务标志"}},[r("el-input",{attrs:{placeholder:"请输入服务标志",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"服务名称"}},[r("el-input",{attrs:{placeholder:"请输入服务名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",{attrs:{label:"所属环境"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.queryParams.is_private,callback:function(t){e.$set(e.queryParams,"is_private",t)},expression:"queryParams.is_private"}},[r("el-option",{attrs:{label:"私有服务",value:!0}}),r("el-option",{attrs:{label:"公有服务",value:!1}})],1)],1),e.queryParams.is_private?r("el-form-item",{attrs:{label:"所属部门",prop:"team_id"}},[r("el-cascader",{attrs:{size:"small",props:{label:"name",value:"id",checkStrictly:!0},options:e.teamList,clearable:""},on:{change:e.chooseQueryTeam},model:{value:e.queryParams.team_id,callback:function(t){e.$set(e.queryParams,"team_id",t)},expression:"queryParams.team_id"}})],1):e._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAddService}},[e._v("新增")])],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"标志符",align:"center",prop:"keyword","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"服务名",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"dockerfile模板",align:"center",prop:"dockerfile_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"代码仓库",align:"center",prop:"code_registry_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"镜像仓库",align:"center",prop:"image_registry_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"代码空间",align:"center",prop:"owner","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"repo","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"运行端口",align:"center",prop:"run_port","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"监听端口",align:"center",prop:"listen_port","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"备注",align:"center",prop:"description","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"120","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:service:update",expression:"'service:service:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdateService(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:service:delete",expression:"'service:service:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDeleteService(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"750px",title:e.insertServiceDialog?"新增服务":"修改服务",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px",rules:e.rules}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入服务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"服务标识",prop:"keyword"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入服务标识"},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"docker模板",prop:"dockerfile_id"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":e.getDockerfiles,placeholder:"请选择"},model:{value:e.form.dockerfile_id,callback:function(t){e.$set(e.form,"dockerfile_id",t)},expression:"form.dockerfile_id"}},e._l(e.dockerfiles,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"代码仓库",prop:"code_registry_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.code_registry_id,callback:function(t){e.$set(e.form,"code_registry_id",t)},expression:"form.code_registry_id"}},e._l(e.codes,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"镜像仓库",prop:"image_registry_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.image_registry_id,callback:function(t){e.$set(e.form,"image_registry_id",t)},expression:"form.image_registry_id"}},e._l(e.images,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"发布模板",prop:"release_id"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":e.getReleases,placeholder:"请选择"},model:{value:e.form.release_id,callback:function(t){e.$set(e.form,"release_id",t)},expression:"form.release_id"}},e._l(e.releases,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}}),r("el-col",{attrs:{span:12}})],1),r("el-form-item",{attrs:{label:"代码仓库核检",prop:"repo"}},[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"代码空间"},model:{value:e.form.owner,callback:function(t){e.$set(e.form,"owner",t)},expression:"form.owner"}})],1),r("el-col",{attrs:{span:10}},[r("el-input",{staticStyle:{"margin-left":"25px"},attrs:{size:"medium",autocomplete:"off",placeholder:"项目名称"},model:{value:e.form.repo,callback:function(t){e.$set(e.form,"repo",t)},expression:"form.repo"}})],1),r("el-col",{attrs:{span:4}},[r("div",{staticStyle:{"text-align":"right"}},[e.form.owner&&e.form.repo?r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.validateProject}},[e._v("核查")]):e._e()],1)])],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"运行端口",prop:"run_port"}},[r("el-input-number",{attrs:{min:80,max:65545},model:{value:e.form.run_port,callback:function(t){e.$set(e.form,"run_port",t)},expression:"form.run_port"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"监听端口",prop:"listen_port"}},[r("el-input-number",{attrs:{min:80,max:65545},model:{value:e.form.listen_port,callback:function(t){e.$set(e.form,"listen_port",t)},expression:"form.listen_port"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"副本数量",prop:"replicas"}},[r("el-input-number",{attrs:{min:1,max:20},model:{value:e.form.replicas,callback:function(t){e.$set(e.form,"replicas",t)},expression:"form.replicas"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"探测方式",prop:"probe_type"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.probe_type,callback:function(t){e.$set(e.form,"probe_type",t)},expression:"form.probe_type"}},[r("el-option",{attrs:{label:"http",value:"httpGet"}}),r("el-option",{attrs:{label:"commond",value:"exec"}}),r("el-option",{attrs:{label:"tcp",value:"tcp"}})],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.probeLabel[e.form.probe_type],prop:"probe_value"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入"+e.probeLabel[e.form.probe_type]},model:{value:e.form.probe_value,callback:function(t){e.$set(e.form,"probe_value",t)},expression:"form.probe_value"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"探测延迟",prop:"probe_init_delay"}},[r("el-input-number",{attrs:{min:5,max:60},model:{value:e.form.probe_init_delay,callback:function(t){e.$set(e.form,"probe_init_delay",t)},expression:"form.probe_init_delay"}})],1)],1)],1),r("el-form-item",{attrs:{label:"运行类型",prop:"run_type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.run_type,callback:function(t){e.$set(e.form,"run_type",t)},expression:"form.run_type"}},e._l(e.runTypes,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"所属环境",prop:"env_ids"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.env_ids,callback:function(t){e.$set(e.form,"env_ids",t)},expression:"form.env_ids"}},e._l(e.envList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"服务类型",prop:"is_private"}},[r("el-radio-group",{model:{value:e.form.is_private,callback:function(t){e.$set(e.form,"is_private",t)},expression:"form.is_private"}},[r("el-radio",{attrs:{label:!0}},[e._v("私有服务")]),r("el-radio",{attrs:{label:!1}},[e._v("公有服务")])],1)],1),e.form.is_private?r("el-form-item",{attrs:{label:"所属部门",prop:"team_id"}},[r("el-cascader",{attrs:{props:{label:"name",value:"id",checkStrictly:!0},options:e.teamList,clearable:""},on:{change:e.chooseTeam},model:{value:e.form.team_id,callback:function(t){e.$set(e.form,"team_id",t)},expression:"form.team_id"}})],1):e._e(),r("el-form-item",{attrs:{label:"服务备注",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,size:"medium",autocomplete:"off",placeholder:"请输入服务备注"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertServiceDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertService}},[e._v("确 定")]):e._e(),e.updateServiceDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateService}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("a434"),r("96cf"),r("cb81")),o=r("bd46"),l=r("ed84"),c=r("53d2"),u=r("e2ab"),d=r("b8a4"),m=r("ca86"),p={data:function(){return{probeLabel:{httpGet:"探测路径",tcp:"探测端口",commod:"探测命令"},envList:[],teamList:[],releases:[],list:[],form:{},total:0,dockerfiles:[],images:[],runTypes:[],codes:[],dialog:!1,updateServiceDialog:!1,insertServiceDialog:!1,loading:!0,searchLoading:!1,queryParams:{page:1,count:10,keyword:void 0,name:void 0},rules:{replicas:[{required:!0,trigger:"blur",message:"副本数量不能为空"}],probe_type:[{required:!0,trigger:"blur",message:"探测方式不能为空"}],probe_value:[{required:!0,trigger:"blur",message:"探测方式值不能为空"}],probe_init_delay:[{required:!0,trigger:"blur",message:"探测延迟时间不能为空"}],env:[{required:!0,trigger:"blur",message:"所属环境不能为空"}],repo:[{required:!0,trigger:"blur",message:"服务仓库不能为空"}],name:[{required:!0,trigger:"blur",message:"服务名称不能为空"}],keyword:[{required:!0,trigger:"blur",message:"服务标识不能为空"}],description:[{required:!0,trigger:"blur",message:"服务描述件不能为空"}],run_port:[{required:!0,trigger:"blur",message:"运行端口不能为空"}],listen_port:[{required:!0,trigger:"blur",message:"监听端口不能为空"}],dockerfile_id:[{required:!0,trigger:"blur",message:"dockerfile模板不能唯恐"}],release_id:[{required:!0,trigger:"blur",message:"发布模板不能唯恐"}],code_registry_id:[{required:!0,trigger:"blur",message:"服务代码仓库不能为空"}],image_registry_id:[{required:!0,trigger:"blur",message:"服务镜像仓库不能为空"}]}}},computed:{},created:function(){this.getCodeRegistries(),this.getImageRegistries(),this.getTeams(),this.getEnvs(),this.getList(),this.getRunTypes()},methods:{getReleases:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return""!==e&&(t.releases=[]),r.next=3,Object(s["f"])({page:1,count:10,name:e});case 3:a=r.sent,t.releases=a.list;case 5:case"end":return r.stop()}}),r)})))()},getRunTypes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])();case 2:e.runTypes=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getDockerfiles:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return""!==e&&(t.dockerfiles=[]),r.next=3,Object(m["c"])({page:1,count:10,name:e});case 3:a=r.sent,t.dockerfiles=a.list;case 5:case"end":return r.stop()}}),r)})))()},getCodeRegistries:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["d"])();case 2:e.codes=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getImageRegistries:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])();case 2:e.images=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getEnvs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])();case 2:e.envList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getTeams:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:r=t.sent,e.teamList=[r];case 4:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["e"])(e.queryParams);case 2:r=t.sent,e.list=r.list,e.total=r.total,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},chooseTeam:function(e){e&&(this.form.team_id=e[e.length-1])},chooseQueryTeam:function(e){e&&(this.queryParams.team_id=e[e.length-1])},handleQuery:function(){this.loading=!0,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,keyword:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleStatusChange:function(e){var t=this,r=!1===e.status?"禁用 ":"启用";this.$confirm('确认要"'+r+'""'+e.name+'"服务吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["h"])({id:e.id,status:e.status})})).then((function(){t.$message({message:r+"成功",type:"success"})})).catch((function(){e.status=!1===e.status}))},handleAddService:function(){this.form={probe_type:"httpGet"},this.insertServiceDialog=!0,this.updateServiceDialog=!1,this.dialog=!0},handleUpdateService:function(e){for(var t in this.insertServiceDialog=!1,this.updateServiceDialog=!0,this.form=this.deepClone(e),this.dockerfiles=[{id:this.form.dockerfile_id,name:this.form.dockerfile_name}],this.releases=[{id:this.form.release_id,name:this.form.release_name}],this.form.env_ids){var r=this.form.env_ids[t],a=!1;for(var n in this.envList)if(this.envList[n].id==r){a=!0;break}a||this.form.env_ids.splice(t,1)}this.env_ids,this.dialog=!0},validateProject:function(){var e=this;Object(d["g"])({id:this.form.code_registry_id,owner:this.form.owner,repo:this.form.repo}).then((function(t){e.$message({type:"success",message:"验证通过!"})})).catch((function(){e.$message({type:"error",message:"验证失败！"})}))},handleDeleteService:function(e){var t=this;this.$confirm("此操作将删除该服务, 是否继续?","提示",{type:"warning"}).then((function(){Object(c["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insertService:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(c["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},updateService:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(c["h"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},f=p,g=(r("0868"),r("2877")),v=Object(g["a"])(f,a,n,!1,null,"22fd7354",null);t["default"]=v.exports},4619:function(e,t,r){"use strict";r("609f")},"473b":function(e,t,r){},"4b3b":function(e,t,r){var a={"./configure/configure_log":"a98b","./configure/configure_log/":"a98b","./configure/configure_log/index":"a98b","./configure/configure_log/index.vue":"a98b","./configure/environment":"2651","./configure/environment/":"2651","./configure/environment/index":"2651","./configure/environment/index.vue":"2651","./configure/field":"caef","./configure/field/":"caef","./configure/field/index":"caef","./configure/field/index.vue":"caef","./configure/resource":"0201","./configure/resource/":"0201","./configure/resource/index":"0201","./configure/resource/index.vue":"0201","./configure/template":"618d","./configure/template/":"618d","./configure/template/index":"618d","./configure/template/index.vue":"618d","./error-page/401":"24e2","./error-page/401.vue":"24e2","./error-page/404":"1db4","./error-page/404.vue":"1db4","./home":"7abe","./home/":"7abe","./home/index":"7abe","./home/index.vue":"7abe","./login":"9ed6","./login/":"9ed6","./login/index":"9ed6","./login/index.vue":"9ed6","./notice/channel":"307e","./notice/channel/":"307e","./notice/channel/index":"307e","./notice/channel/index.vue":"307e","./notice/log":"a0c8","./notice/log/":"a0c8","./notice/log/index":"a0c8","./notice/log/index.vue":"a0c8","./notice/notice":"b0fb","./notice/notice/":"b0fb","./notice/notice/index":"b0fb","./notice/notice/index.vue":"b0fb","./service/code_registry":"ec2d","./service/code_registry/":"ec2d","./service/code_registry/index":"ec2d","./service/code_registry/index.vue":"ec2d","./service/dockerfile":"fc05","./service/dockerfile/":"fc05","./service/dockerfile/index":"fc05","./service/dockerfile/index.vue":"fc05","./service/environment":"ecc7","./service/environment/":"ecc7","./service/environment/index":"ecc7","./service/environment/index.vue":"ecc7","./service/image_registry":"9f78","./service/image_registry/":"9f78","./service/image_registry/index":"9f78","./service/image_registry/index.vue":"9f78","./service/network":"1cd3","./service/network/":"1cd3","./service/network/index":"1cd3","./service/network/index.vue":"1cd3","./service/pack_log":"79e8","./service/pack_log/":"79e8","./service/pack_log/index":"79e8","./service/pack_log/index.vue":"79e8","./service/release":"6fcb","./service/release/":"6fcb","./service/release/index":"6fcb","./service/release/index.vue":"6fcb","./service/release_log":"3b53","./service/release_log/":"3b53","./service/release_log/index":"3b53","./service/release_log/index.vue":"3b53","./service/service":"4022","./service/service/":"4022","./service/service/index":"4022","./service/service/index.vue":"4022","./system/components/SelectTeam":"cfa5","./system/components/SelectTeam.vue":"cfa5","./system/log":"b380","./system/log/":"b380","./system/log/index":"b380","./system/log/index.vue":"b380","./system/menu":"f794","./system/menu/":"f794","./system/menu/index":"f794","./system/menu/index.vue":"f794","./system/role":"70eb","./system/role/":"70eb","./system/role/index":"70eb","./system/role/index.vue":"70eb","./system/team":"2241","./system/team/":"2241","./system/team/index":"2241","./system/team/index.vue":"2241","./system/user":"1f34","./system/user/":"1f34","./system/user/index":"1f34","./system/user/index.vue":"1f34"};function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="4b3b"},"4b3d":function(e,t,r){"use strict";r("e60d")},"4bdd":function(e,t,r){"use strict";r("6ea3")},"53d2":function(e,t,r){"use strict";r.d(t,"g",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"h",(function(){return u})),r.d(t,"b",(function(){return d}));var a=r("b775");function n(e){return Object(a["a"])({url:"service/variable",method:"get",params:e})}function i(e){return Object(a["a"])({url:"service/run_types",method:"get",params:e})}function s(e){return Object(a["a"])({url:"service/service/filter",method:"get",params:e})}function o(e){return Object(a["a"])({url:"service/service/page",method:"get",params:e})}function l(e){return Object(a["a"])({url:"service/service/envs",method:"get",params:e})}function c(e){return Object(a["a"])({url:"service/service",method:"post",data:e})}function u(e){return Object(a["a"])({url:"service/service",method:"put",data:e})}function d(e){return Object(a["a"])({url:"service/service",method:"delete",data:e})}},5792:function(e,t,r){"use strict";r("fa31")},"609f":function(e,t,r){},"618d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"custom-card"},[r("div",{staticClass:"service"},[r("div",{staticClass:"hr"},[r("span",{staticClass:"icon"}),r("span",[e._v("服务信息")])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("所属服务")]),r("div",{staticClass:"select-input"},[r("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.handleSelect,clear:e.handleSelect},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1)]),e.curService.id?r("div",[r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("服务名称")]),r("span",{staticClass:"value"},[e._v(e._s(e.curService.name))])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("服务标志")]),r("span",{staticClass:"value"},[e._v(e._s(e.curService.keyword))])])]):e._e(),e.curService.id?r("div",{staticClass:"hr",staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[r("span",{staticClass:"icon"}),r("span",[e._v("配置信息")])]):e._e(),e.curTemplate.id?r("div",[r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("当前版本")]),r("span",{staticClass:"value"},[e._v(e._s(e.curTemplate.version))])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("创建时间")]),r("span",{staticClass:"value"},[e._v(e._s(e._f("parseTime")(e.curTemplate.created_at)))])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("创建人员")]),r("span",{staticClass:"value"},[e._v(e._s(e.curTemplate.operator))])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("版本描述")]),r("span",{staticClass:"value"},[e._v(e._s(e.curTemplate.description?e.curTemplate.description:"暂无描述"))])])]):e._e(),r("div",[e.tempValue?e.curTemplate.id?e._e():r("el-empty",{attrs:{description:"暂无配置数据"}}):r("el-empty",{attrs:{description:"请先选择服务"}})],1)]),r("div",{staticClass:"configure"},[r("div",{staticClass:"header"},[r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:parse",expression:"'configure:template:parse'"}],staticClass:"header-item"},[r("el-button",{attrs:{disabled:!e.curService.id,type:"success",icon:"el-icon-brush",size:"small"},on:{click:function(t){return e.handleChooseEnv("render")}}},[e._v("渲染测试")])],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:add",expression:"'configure:template:add'"}],staticClass:"header-item"},[r("el-button",{attrs:{disabled:!e.curService.id,type:"primary",icon:"el-icon-upload2",size:"small"},on:{click:e.handleAddTemplate}},[e._v("模板更新")])],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:config:sync",expression:"'configure:config:sync'"}],staticClass:"header-item"},[r("el-button",{attrs:{disabled:!e.curService.id,type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:function(t){return e.handleChooseEnv("sync")}}},[e._v("同步配置")])],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:update",expression:"'configure:template:update'"}],staticClass:"header-item"},[r("el-button",{attrs:{disabled:!e.curService.id,type:"warning",icon:"el-icon-s-operation",size:"small"},on:{click:e.handlerChangeVersion}},[e._v("版本切换")])],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:config:rollback",expression:"'configure:config:rollback'"}],staticClass:"header-item"},[r("el-button",{attrs:{disabled:!e.curService.id,type:"warning",icon:"el-icon-money",size:"small"},on:{click:function(t){return e.handleChooseEnv("rollback")}}},[e._v("配置回归")])],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:config:driver",expression:"'configure:config:driver'"}],staticClass:"header-item"},[r("el-button",{attrs:{disabled:!e.curService.id,type:"warning",icon:"el-icon-money",size:"small"},on:{click:function(t){return e.handleChooseEnv("config")}}},[e._v("配置查看")])],1)]),e.curService.id?r("vueJsonEditor",{staticClass:"edit",attrs:{mode:"code",lang:"zh"},on:{"json-change":function(t){e.iserror=!1},"has-error":function(t){e.iserror=!0}},model:{value:e.jsonValue,callback:function(t){e.jsonValue=t},expression:"jsonValue"}}):r("el-empty",{staticClass:"edit",attrs:{description:"请先选择服务"}})],1),r("div",{staticClass:"fields"},[r("div",{staticClass:"hr"},[r("span",{staticClass:"icon"}),r("span",[e._v("可用字段")])]),r("div",{staticClass:"header"},[r("el-input",{attrs:{placeholder:"请输入关键字",size:"small",clearable:""},model:{value:e.searchFieldValue,callback:function(t){e.searchFieldValue=t},expression:"searchFieldValue"}}),r("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"small",type:"primary"}},[e._v("搜索")])],1),e.curService.id?r("el-tabs",{attrs:{stretch:""},model:{value:e.filedType,callback:function(t){e.filedType=t},expression:"filedType"}},[r("el-tab-pane",{attrs:{label:"服务字段",name:"service"}}),r("el-tab-pane",{attrs:{label:"资源配置",name:"resource"}})],1):e._e(),r("div",{staticClass:"field-list"},["service"==e.filedType?r("div",e._l(e.fields.service,(function(t,a){return-1!=t.field.indexOf(e.searchFieldValue)?r("div",{key:a,staticClass:"item"},[r("div",{staticClass:"item-row"},[r("span",{staticClass:"label"},[e._v("字段")]),r("el-tag",{attrs:{size:"small",type:"primary"}},[r("span",[e._v(e._s(t.field))]),r("i",{staticClass:"copy el-icon-document-copy",on:{click:function(r){return e.handleCopy(t.field)}}})])],1),r("div",{staticClass:"item-row"},[r("span",{staticClass:"label"},[e._v("说明")]),r("span",{staticClass:"value"},[e._v(e._s(t.description))])])]):e._e()})),0):r("div",e._l(e.fields.resource,(function(t,a){return-1!=t.field.indexOf(e.searchFieldValue)?r("div",{key:a,staticClass:"item"},[r("div",{staticClass:"item-row"},[r("span",{staticClass:"label"},[e._v("字段")]),r("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(t.field))])]),r("div",{staticClass:"item-row"},[r("span",{staticClass:"label"},[e._v("说明")]),r("span",{staticClass:"value"},[e._v(e._s(t.description))])]),r("el-divider",{staticClass:"divider"},[e._v("资源子字段")]),e._l(JSON.parse(t.child_field),(function(a){return r("div",{key:a,staticClass:"item-left"},[r("el-tag",{attrs:{size:"small",type:"primary"}},[r("span",[e._v(e._s(t.field)+"."+e._s(a))]),r("i",{staticClass:"copy el-icon-document-copy",on:{click:function(r){return e.handleCopy(t.field+"."+a)}}})])],1)}))],2):e._e()})),0)])],1)])]),r("el-dialog",{attrs:{title:"模板变更详情",visible:e.addTemplateDialog},on:{"update:visible":function(t){e.addTemplateDialog=t}}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.addTemplateInfo}},[r("el-table-column",{attrs:{prop:"key",label:"变更key","header-align":"center",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"变更类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["add"==t.row.type?r("el-tag",{attrs:{type:"success",size:"medium"}},[e._v("新增")]):e._e(),"update"==t.row.type?r("el-tag",{attrs:{type:"primary",size:"medium"}},[e._v("更新")]):e._e(),"delete"==t.row.type?r("el-tag",{attrs:{type:"danger",size:"medium"}},[e._v("删除")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[r("div",{staticClass:"change-item"},[r("span",[e._v("变更前")]),r("el-divider",{attrs:{direction:"vertical"}}),r("span",[e._v("变更后")])],1),r("div",{staticClass:"change-item"},[r("textarea",[e._v(e._s(JSON.stringify(t.row.old,null,2)))]),r("textarea",[e._v(e._s(JSON.stringify(t.row.val,null,2)))])]),r("el-tag",{staticClass:"pointer",attrs:{slot:"reference",size:"medium"},slot:"reference"},[e._v("详情")])],1)]}}])})],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:add",expression:"'configure:template:add'"}],attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addTemplate()}}},[e._v("确定变更")])],1)],1),r("el-dialog",{attrs:{fullscreen:"",title:"版本切换",visible:e.versionDialog},on:{"update:visible":function(t){e.versionDialog=t}}},[r("el-tabs",{staticClass:"custom-tabs",attrs:{"tab-position":"left"},on:{"tab-click":e.handlerChooseVersion},model:{value:e.cueTemplateVersion,callback:function(t){e.cueTemplateVersion=t},expression:"cueTemplateVersion"}},e._l(e.templateList,(function(t,a){return r("el-tab-pane",{attrs:{name:t.version}},[r("div",{staticClass:"tab-label",attrs:{slot:"label"},slot:"label"},[r("div",[e._v("版本号："+e._s(t.version))]),r("div",[e._v("修改人："+e._s(t.operator))]),r("div",[e._v("更新描述："+e._s(t.description))]),r("div",[e._v("修改时间："+e._s(e._f("parseTime")(t.created_at)))])]),r("vueJsonEditor",{staticClass:"versionEdit",attrs:{mode:"code",lang:"zh"},model:{value:e.templateJsonValue,callback:function(t){e.templateJsonValue=t},expression:"templateJsonValue"}})],1)})),1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:update",expression:"'configure:template:update'"}],attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.changeVersion}},[e._v("使用此模板")])],1)],1),r("el-dialog",{attrs:{title:e.envTitleConfig[e.envTitle],visible:e.envDialog},on:{"update:visible":function(t){e.envDialog=t}}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.envList}},[r("el-table-column",{attrs:{prop:"keyword",label:"环境标志","header-align":"center",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"环境名称","header-align":"center",align:"center"}}),r("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["sync"==e.envTitle?r("el-tag",{staticClass:"pointer",attrs:{size:"medium"},on:{click:function(r){return e.handleCompareConfig(t.row)}}},[e._v("同步")]):e._e(),"rollback"==e.envTitle?r("el-tag",{staticClass:"pointer",attrs:{size:"medium"},on:{click:function(r){return e.handleRollbackConfig(t.row)}}},[e._v("回滚")]):e._e(),"render"==e.envTitle?r("el-tag",{staticClass:"pointer",attrs:{size:"medium"},on:{click:function(r){return e.handleRenderConfig(t.row)}}},[e._v("渲染")]):e._e(),"config"==e.envTitle?r("el-tag",{staticClass:"pointer",attrs:{size:"medium"},on:{click:function(r){return e.handleGetConfig(t.row)}}},[e._v("查看")]):e._e()]}}])})],1)],1),r("el-dialog",{attrs:{title:"配置变更详情",visible:e.syncConfigDialog},on:{"update:visible":function(t){e.syncConfigDialog=t}}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.syncConfigInfo}},[r("el-table-column",{attrs:{prop:"key",label:"变更key","header-align":"center",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"变更类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["add"==t.row.type?r("el-tag",{attrs:{type:"success",size:"medium"}},[e._v("新增")]):e._e(),"update"==t.row.type?r("el-tag",{attrs:{type:"primary",size:"medium"}},[e._v("更新")]):e._e(),"delete"==t.row.type?r("el-tag",{attrs:{type:"danger",size:"medium"}},[e._v("删除")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[r("div",{staticClass:"change-item"},[r("span",[e._v("变更前")]),r("el-divider",{attrs:{direction:"vertical"}}),r("span",[e._v("变更后")])],1),r("div",{staticClass:"change-item"},[r("textarea",[e._v(e._s(JSON.stringify(t.row.old,null,2)))]),r("textarea",[e._v(e._s(JSON.stringify(t.row.val,null,2)))])]),r("el-tag",{staticClass:"pointer",attrs:{slot:"reference",size:"medium"},slot:"reference"},[e._v("详情")])],1)]}}])})],1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:add",expression:"'configure:template:add'"}],attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small",type:"primary",disabled:!e.syncConfigInfo},on:{click:function(t){return e.syncConfig()}}},[e._v("确定变更")])],1)],1),r("el-dialog",{attrs:{fullscreen:"",title:"配置回归",visible:e.rollbackDialog},on:{"update:visible":function(t){e.rollbackDialog=t}}},[r("el-tabs",{staticClass:"custom-tabs",attrs:{"tab-position":"left"},on:{"tab-click":e.handlerChooseConfig},model:{value:e.curConfigId,callback:function(t){e.curConfigId=t},expression:"curConfigId"}},e._l(e.configList,(function(t,a){return r("el-tab-pane",{attrs:{name:t.name}},[r("div",{staticClass:"tab-label",attrs:{slot:"label"},slot:"label"},[r("div",[e._v("同步时间："+e._s(e._f("parseTime")(t.created_at))+" ")]),r("div",[e._v("同步人员："+e._s(t.operator))]),r("div",[e._v("修改详情： "),r("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:JSON.parse(t.description)}},[r("el-table-column",{attrs:{prop:"key",label:"变更key","header-align":"center",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"变更类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["add"==t.row.type?r("el-tag",{attrs:{type:"success",size:"medium"}},[e._v("新增")]):e._e(),"update"==t.row.type?r("el-tag",{attrs:{type:"primary",size:"medium"}},[e._v("更新")]):e._e(),"delete"==t.row.type?r("el-tag",{attrs:{type:"danger",size:"medium"}},[e._v("删除")]):e._e()]}}],null,!0)}),r("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"hover"}},[r("div",{staticClass:"change-item"},[r("span",[e._v("变更前")]),r("el-divider",{attrs:{direction:"vertical"}}),r("span",[e._v("变更后")])],1),r("div",{staticClass:"change-item"},[r("textarea",[e._v(e._s(JSON.stringify(t.row.old,null,2)))]),r("textarea",[e._v(e._s(JSON.stringify(t.row.val,null,2)))])]),r("el-tag",{staticClass:"pointer",attrs:{slot:"reference",size:"medium"},slot:"reference"},[e._v("详情")])],1)]}}],null,!0)})],1),r("span",{staticStyle:{color:"#E6A23C"},attrs:{slot:"reference"},slot:"reference"},[e._v("查看")])],1)],1)]),r("vueJsonEditor",{staticClass:"versionEdit",attrs:{mode:"code",lang:"zh"},model:{value:e.configJson,callback:function(t){e.configJson=t},expression:"configJson"}})],1)})),1),r("div",{directives:[{name:"permission",rawName:"v-permission",value:"configure:template:update",expression:"'configure:template:update'"}],attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.changeConfig}},[e._v("使用此配置")])],1)],1),r("el-dialog",{attrs:{fullscreen:"",title:"配置内容",visible:e.configDialog},on:{"update:visible":function(t){e.configDialog=t}}},[r("vueJsonEditor",{staticClass:"configEdit",attrs:{mode:"code",lang:"zh"},model:{value:e.configJson,callback:function(t){e.configJson=t},expression:"configJson"}})],1)],1)},n=[],i=r("1da1"),s=r("ade3"),o=(r("b0c0"),r("a9e3"),r("498a"),r("e9c4"),r("b64b"),r("4de4"),r("d3b7"),r("caad"),r("2532"),r("96cf"),r("53d2")),l=r("b775");function c(e){return Object(l["a"])({url:"configure/service/fields",method:"get",params:e})}function u(e){return Object(l["a"])({url:"configure/template",method:"get",params:e})}function d(e){return Object(l["a"])({url:"configure/templates",method:"get",params:e})}function m(e){return Object(l["a"])({url:"configure/template",method:"post",data:e})}function p(e){return Object(l["a"])({url:"configure/template",method:"put",data:e})}function f(e){return Object(l["a"])({url:"configure/config/compare",method:"post",data:e})}function g(e){return Object(l["a"])({url:"configure/config/sync",method:"post",data:e})}function v(e){return Object(l["a"])({url:"configure/config/logs",method:"get",params:e})}function h(e){return Object(l["a"])({url:"configure/config/log",method:"get",params:e})}function b(e){return Object(l["a"])({url:"configure/config/rollback",method:"post",data:e})}function y(e){return Object(l["a"])({url:"configure/config/driver",method:"get",params:e})}function _(e){return Object(l["a"])({url:"configure/template/parse",method:"get",params:e})}var w=r("45a3"),k={components:{vueJsonEditor:w["a"]},data:function(){var e;return e={dialog:!1,curService:{},form:{}},Object(s["a"])(e,"dialog",!1),Object(s["a"])(e,"updateEnvDialog",!1),Object(s["a"])(e,"insertEnvDialog",!1),Object(s["a"])(e,"loading",!0),Object(s["a"])(e,"tempValue",void 0),Object(s["a"])(e,"templateList",[]),Object(s["a"])(e,"curTemplate",{}),Object(s["a"])(e,"queryParams",{service_id:void 0}),Object(s["a"])(e,"curConfigId",void 0),Object(s["a"])(e,"configList",[]),Object(s["a"])(e,"configJson",{}),Object(s["a"])(e,"templateId",void 0),Object(s["a"])(e,"iserror",!1),Object(s["a"])(e,"jsonValue",{}),Object(s["a"])(e,"searchFieldValue",""),Object(s["a"])(e,"filedType","service"),Object(s["a"])(e,"fields",{service:[],resource:[]}),Object(s["a"])(e,"addTemplateDialog",!1),Object(s["a"])(e,"addTemplateValue",""),Object(s["a"])(e,"addTemplateInfo",[]),Object(s["a"])(e,"versionDialog",!1),Object(s["a"])(e,"cueTemplateVersion",""),Object(s["a"])(e,"template",{}),Object(s["a"])(e,"templateJsonValue",{}),Object(s["a"])(e,"envDialog",!1),Object(s["a"])(e,"envTitleConfig",{sync:"配置同步",rollback:"配置回滚",render:"配置渲染",config:"配置查看"}),Object(s["a"])(e,"envTitle",""),Object(s["a"])(e,"envList",[]),Object(s["a"])(e,"syncConfigDialog",!1),Object(s["a"])(e,"syncConfigInfo",[]),Object(s["a"])(e,"syncEnv",{}),Object(s["a"])(e,"rollbackDialog",!1),Object(s["a"])(e,"configDialog",!1),e},computed:{},created:function(){},methods:{handleRenderConfig:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_({srv_keyword:t.curService.keyword,env_keyword:e.keyword});case 2:a=r.sent,t.configJson=JSON.parse(a),t.configDialog=!0;case 5:case"end":return r.stop()}}),r)})))()},handleGetConfig:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,y({srv_keyword:t.curService.keyword,env_keyword:e.keyword});case 2:a=r.sent,a=""==a?"{}":a,t.configJson=JSON.parse(a),t.configDialog=!0;case 6:case"end":return r.stop()}}),r)})))()},handleRollbackConfig:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,v({service_keyword:t.curService.keyword,env_keyword:e.keyword});case 2:if(t.configList=r.sent,t.configList.length){r.next=6;break}return t.$message({message:"暂无配置同步记录",type:"error"}),r.abrupt("return");case 6:for(a in t.configList)t.configList[a].name=String(t.configList[a].id);t.rollbackDialog=!0,t.curConfigId=t.configList[0].name,t.handlerChooseConfig();case 10:case"end":return r.stop()}}),r)})))()},handlerChooseConfig:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h({id:Number(e.curConfigId)});case 2:r=t.sent,e.configJson=JSON.parse(r.config);case 4:case"end":return t.stop()}}),t)})))()},changeConfig:function(){var e=this;b({id:Number(this.curConfigId)}).then((function(t){e.$message({message:"配置回滚成功",type:"success"}),e.rollbackDialog=!1}))},handlerChangeVersion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d({service_keyword:e.curService.keyword});case 2:e.templateList=t.sent,e.cueTemplateVersion=e.curTemplate.version,e.handlerChooseVersion(),e.versionDialog=!0;case 6:case"end":return t.stop()}}),t)})))()},changeVersion:function(){var e=this;p({id:this.template.id}).then((function(t){e.versionDialog=!1,e.getTemplate(),e.$message({message:"使用此模板成功",type:"success"})}))},handlerChooseVersion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in e.templateList)e.cueTemplateVersion===e.templateList[r].version&&(e.template=e.templateList[r]);return t.next=3,u({id:e.template.id});case 3:e.template=t.sent,e.templateJsonValue=JSON.parse(e.template.content);case 5:case"end":return t.stop()}}),t)})))()},handleCompareConfig:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.$loading({lock:!0,text:"获取中间件配置中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t.syncConfigDialog=!0,t.syncEnv=e,f({srv_keyword:t.curService.keyword,env_keyword:e.keyword}).then((function(e){t.syncConfigInfo=e,a.close()})).catch((function(e){a.close()}));case 4:case"end":return r.stop()}}),r)})))()},syncConfig:function(e){var t=this;g({srv_keyword:this.curService.keyword,env_keyword:this.syncEnv.keyword}).then((function(e){t.$message({message:"配置同步成功",type:"success"}),t.syncConfigDialog=!1}))},handleChooseEnv:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["d"])({srv_id:t.curService.id});case 2:t.envList=r.sent,t.envTitle=e,t.envDialog=!0;case 5:case"end":return r.stop()}}),r)})))()},handleAddTemplate:function(){this.iserror?this.$message({message:"模板格式存在错误，禁止提交",type:"error"}):(this.curTemplate.content||(this.curTemplate.content="{}"),this.addTemplateInfo=this.handleCompare(JSON.parse(this.curTemplate.content),this.jsonValue),this.addTemplateInfo.length?this.addTemplateDialog=!0:this.$message({message:"模板不存在变更",type:"error"}))},addTemplate:function(){var e=this;this.addTemplateDialog=!1,this.$prompt("请输入更新备注","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return e&&""!=e.trim()?!(e.length>20)||"不能超过20个字符":"版本描述不能为空"}}).then((function(t){var r=t.value;m({service_keyword:e.curService.keyword,content:JSON.stringify(e.jsonValue),description:r}).then((function(t){e.getTemplate(),e.$message({message:"模板更新成功",type:"success"})}))}))},getTemplate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u({keyword:e.curService.keyword});case 2:e.curTemplate=t.sent,e.curTemplate.content=e.curTemplate.content?e.curTemplate.content:"{}",e.jsonValue=JSON.parse(e.curTemplate.content);case 5:case"end":return t.stop()}}),t)})))()},handleSelect:function(e){e&&e.id?(this.curService=e,this.getTemplate(),this.getFileds()):this.resetQuery()},resetQuery:function(){this.curService={},this.tempValue=void 0,this.curTemplate={},this.queryParams={page:1,count:10,keyword:void 0}},getServices:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["f"])({page:1,count:10,name:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},querySearchAsync:function(e,t){if(!e||!e.length)return[];this.getServices(e).then((function(e){for(var r in e.list)e.list[r].show_name=e.list[r].name+"("+e.list[r].keyword+")";t(e.list)}))},getFileds:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c({keyword:e.curService.keyword});case 2:e.fields=t.sent,console.log(e.fields);case 4:case"end":return t.stop()}}),t)})))()},handleCopy:function(e){e="{{"+e+"}}";var t=function(t){t.clipboardData.setData("text/plain",e),t.preventDefault()},r={once:!0};document.addEventListener("copy",t,r),document.execCommand("copy"),this.$message({message:"复制成功",type:"success"})},handleCompare:function(e,t){var r=[],a=Object.keys(e),n=Object.keys(t),i=a.filter((function(e){return!n.includes(e)}));for(var s in i)r.push({type:"delete",key:i[s],old:t[i[s]],val:{}});var o=n.filter((function(e){return!a.includes(e)}));for(var l in o)r.push({type:"add",key:o[l],old:{},val:t[o[l]]});for(var c in e)JSON.stringify(e[c])!=JSON.stringify(t[c])&&r.push({type:"update",key:c,old:e[c],val:t[c]});return r}}},x=k,C=(r("a47a"),r("3f10"),r("2877")),O=Object(C["a"])(x,a,n,!1,null,"0898df1c",null);t["default"]=O.exports},6344:function(e,t,r){"use strict";r("473b")},6574:function(e,t,r){},"6bb6":function(e,t,r){},"6c00":function(e,t,r){"use strict";r("b81c")},"6ea3":function(e,t,r){},"6fcb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"模板名称"}},[r("el-input",{attrs:{placeholder:"请输入模板名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",{attrs:{label:"模板类型",size:"medium"}},[r("el-select",{model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.types,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:release:add",expression:"'service:release:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:release:page",expression:"'service:release:page'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"release名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"release描述",align:"center",prop:"desc","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-tickets"},on:{click:function(r){return e.handleTemplate(t.row)}},slot:"reference"},[e._v("查看模板")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:release:update",expression:"'service:release:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:release:delete",expression:"'service:release:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"800px",title:e.insertDialog?"新增代码模板配置":"修改代码模板配置",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入模板名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"模板类型",prop:"type"}},[r("el-select",{attrs:{size:"medium"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.types,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",{attrs:{label:"模板内容",prop:"template"}},[r("div",{staticClass:"codeEditBox"},[r("editor",{staticClass:"editor",attrs:{lang:"yaml",options:e.editorOptions,theme:"chrome",width:"100%"},on:{input:e.changeTemplate,init:e.editorInit},model:{value:e.form.template,callback:function(t){e.$set(e.form,"template",t)},expression:"form.template"}})],1)]),e.templateVariable.length?r("el-form-item",{attrs:{label:"模板变量",prop:"desc"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.templateVariable,border:""}},[r("el-table-column",{attrs:{prop:"keyword",label:"变量",width:"180"}}),r("el-table-column",{attrs:{prop:"label",label:"描述"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"模板描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1),r("el-dialog",{attrs:{width:"800px",title:"发布模板",visible:e.templateDialog},on:{"update:visible":function(t){e.templateDialog=t}}},[r("editor",{attrs:{lang:"yaml",options:e.editorOptions,theme:"chrome",width:"100%",height:"450px","aria-disabled":""},on:{init:e.editorInit},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.templateDialog=!1}}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("ac1f"),r("466d"),r("96cf"),r("7c9e")),o=r.n(s),l=(r("061c"),r("53d2")),c=r("cb81"),u={components:{editor:o.a},data:function(){return{list:[],form:{},types:[],templateDialog:!1,template:"",dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,rules:{name:[{required:!0,trigger:"blur",message:"模板名称不能为空"}],type:[{required:!0,trigger:"blur",message:"模板类型不能为空"}],template:[{required:!0,trigger:"blur",message:"模板内容不能为空"}]},editorOptions:{language:"yaml",enableBasicAutocompletion:!0,enableSnippets:!1,enableLiveAutocompletion:!0,tabSize:1,fontSize:14,showPrintMargin:!0},total:0,queryParams:{page:1,count:10,name:void 0},templateVariable:[],variables:{}}},computed:{},created:function(){this.getVariable(),this.getList(),this.getReleaseTypes()},methods:{getReleaseTypes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["e"])();case 2:e.types=t.sent;case 3:case"end":return t.stop()}}),t)})))()},editorInit:function(){r("95b8"),r("2099"),r("2968"),r("ec5e")},getVariable:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["g"])(e.queryParams);case 2:e.variables=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])(e.queryParams);case 2:r=t.sent,e.list=r.list,e.total=r.total,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,name:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleTemplate:function(e){this.template=e.template,this.templateDialog=!0},handleAdd:function(){this.form={},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.form=this.deepClone(e),this.getTemplateVariable(this.form.template),this.dialog=!0},changeTemplate:function(e){this.getTemplateVariable(e)},getTemplateVariable:function(e){var t=/\{\w+}/g,r=e.match(t);this.templateVariable=[];var a={};for(var n in r){var i=r[n].substr(1,r[n].length-2);this.variables[i]&&!a[i]&&(a[i]=!0,this.templateVariable.push({keyword:i,label:this.variables[i]}))}},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该模板, 是否继续?","提示",{type:"warning"}).then((function(){Object(c["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(c["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},update:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(c["g"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},d=u,m=(r("d36a"),r("2877")),p=Object(m["a"])(d,a,n,!1,null,"57182eec",null);t["default"]=p.exports},"70eb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:list",expression:"'system:role:list'"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"角色名称"}},[r("el-input",{attrs:{placeholder:"请输入角色名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",{attrs:{label:"角色标志"}},[r("el-input",{attrs:{placeholder:"请输入角色标志",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"角色状态"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[r("el-option",{attrs:{label:"正常",value:"true"}}),r("el-option",{attrs:{label:"禁用",value:"false"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1),r("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:add",expression:"'system:role:add'"}]},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAddRole}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"角色名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"角色标志",align:"center",prop:"keyword","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"角色权重",align:"center",prop:"weight","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{disabled:1===t.row.id,"active-text":"正常","inactive-text":"禁用"},on:{change:function(r){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"备注",align:"center",prop:"description","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!==t.row.id?r("div",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:menu",expression:"'system:role:menu'"}],attrs:{size:"mini",type:"text",icon:"el-icon-postcard"},on:{click:function(r){return e.handleMenu(t.row)}}},[e._v("菜单")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:update",expression:"'system:role:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdateRole(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:delete",expression:"'system:role:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDeleteRole(t.row)}}},[e._v("删除")])],1):e._e()]}}])})],1)],1),r("el-dialog",{attrs:{width:"500px",title:e.insertRoleDialog?"新增角色":"修改角色",visible:e.roleDialog},on:{"update:visible":function(t){e.roleDialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.roleForm,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{attrs:{disabled:!e.insertRoleDialog,size:"medium",autocomplete:"off",placeholder:"请输入角色名称"},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),r("el-form-item",{attrs:{label:"权限标识",prop:"keyword"}},[r("el-input",{attrs:{disabled:!e.insertRoleDialog,size:"medium",autocomplete:"off",placeholder:"请输入权限标识"},model:{value:e.roleForm.keyword,callback:function(t){e.$set(e.roleForm,"keyword",t)},expression:"roleForm.keyword"}})],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"角色权重"}},[r("el-input-number",{attrs:{size:"medium"},model:{value:e.roleForm.weight,callback:function(t){e.$set(e.roleForm,"weight",t)},expression:"roleForm.weight"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"角色状态"}},[r("el-radio-group",{model:{value:e.roleForm.status,callback:function(t){e.$set(e.roleForm,"status",t)},expression:"roleForm.status"}},[r("el-radio",{attrs:{label:!0}},[e._v("正常")]),r("el-radio",{attrs:{label:!1}},[e._v("禁用")])],1)],1)],1)],1),r("el-form-item",{attrs:{label:"数据权限",prop:"data_scope"}},[r("el-select",{attrs:{size:"medium",placeholder:"请选择数据权限"},model:{value:e.roleForm.data_scope,callback:function(t){e.$set(e.roleForm,"data_scope",t)},expression:"roleForm.data_scope"}},e._l(e.dataScope,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),"CUSTOM"==e.roleForm.data_scope?r("el-form-item",{attrs:{label:"选择部门",prop:"data_scope"}},[r("SelectTeam",{attrs:{team:[e.teamTree],keys:e.curchooseKeys},on:{confirm:e.chooseTeam}})],1):e._e(),r("el-form-item",{attrs:{label:"角色备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.roleDialog=!1}}},[e._v("取 消")]),e.insertRoleDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertRole}},[e._v("确 定")]):e._e(),e.updateRoleDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateRole}},[e._v("确 定")]):e._e()],1)],1),r("el-dialog",{attrs:{title:"角色菜单",visible:e.menuDialog,width:"500px"},on:{"update:visible":function(t){e.menuDialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.roleForm,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"角色名称"}},[r("el-input",{attrs:{disabled:!0,size:"medium",autocomplete:"off",placeholder:"请输入角色名称"},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),r("el-form-item",{attrs:{label:"权限标识"}},[r("el-input",{attrs:{disabled:!0,size:"medium",autocomplete:"off",placeholder:"请输入权限标识"},model:{value:e.roleForm.keyword,callback:function(t){e.$set(e.roleForm,"keyword",t)},expression:"roleForm.keyword"}})],1),r("el-form-item",{attrs:{label:"角色菜单"}},[r("div",{staticClass:"tree-box"},[r("el-tree",{ref:"menu",attrs:{"node-key":"id",data:[e.menuTree],"show-checkbox":"","check-strictly":!1,props:{label:"title"}}})],1)])],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.menuDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateRoleMenu(e.roleForm.id)}}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("e9c4"),r("96cf"),r("cfa5")),o=r("3528"),l=r("bd46"),c=r("a6dc"),u={components:{SelectTeam:s["default"]},data:function(){return{list:[],roleForm:{},roleDialog:!1,updateRoleDialog:!1,insertRoleDialog:!1,dataScope:{},teamTree:{},curchooseKeys:[],roleMenuIds:[],loading:!0,queryParams:{name:null,keyword:null,status:null},total:0,menuTree:{},menuDialog:!1,rules:{name:[{required:!0,trigger:"blur",message:"角色名称不能为空"}],keyword:[{required:!0,trigger:"blur",message:"角色标识不能为空"}],data_scope:[{required:!0,trigger:"blur",message:"数据权限不能为空"}]}}},created:function(){this.getList(),this.init()},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:return e.dataScope=t.sent,t.next=5,Object(l["c"])();case 5:return e.teamTree=t.sent,t.next=8,Object(c["c"])({is_filter:!0});case 8:e.menuTree=t.sent;case 9:case"end":return t.stop()}}),t)})))()},chooseTeam:function(e){this.curchooseKeys=e},updateRoleMenu:function(e){var t=this,r=this.$refs.menu.getHalfCheckedKeys(),a=this.$refs.menu.getCheckedKeys();r.unshift.apply(r,a),Object(o["b"])({role_id:e,menu_ids:r}).then((function(e){t.menuDialog=!1,t.$message({message:"修改成功",type:"success"})}))},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["g"])(e.queryParams);case 2:e.list=t.sent,e.loading=!1,e.total=e.list.length;case 5:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.getList()},resetQuery:function(){this.queryParams={role_name:null,role_key:null,status:null}},handleStatusChange:function(e){var t=this,r=!1===e.status?"禁用 ":"启用";this.$confirm("确认要"+r+'"'+e.name+'"角色吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["h"])({id:e.id,status:e.status})})).then((function(){t.$message({message:r+"成功",type:"success"})})).catch((function(){e.status=!1===e.status}))},handleAddRole:function(){this.roleForm={status:!0,weight:0},this.insertRoleDialog=!0,this.updateRoleDialog=!1,this.roleDialog=!0,this.curchooseKeys=[]},handleUpdateRole:function(e){this.insertRoleDialog=!1,this.updateRoleDialog=!0,this.roleDialog=!0,this.roleForm=this.deepClone(e),"CUSTOM"==this.roleForm.data_scope&&(""==this.roleForm.team_ids?this.curchooseKeys=[]:this.curchooseKeys=JSON.parse(this.roleForm.team_ids))},handleMenu:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.menuDialog=!0,t.roleForm=t.deepClone(e),r.next=4,Object(o["f"])({role_id:e.id});case 4:a=r.sent,a=a||[],n=function(){var e=t.getTreeIds(t.menuTree);for(var r in e){var n=e[r];t.$refs.menu.setChecked(n,-1!=a.indexOf(n))}},n();case 8:case"end":return r.stop()}}),r)})))()},handleDeleteRole:function(e){var t=this;this.$confirm("此操作将删除该角色, 是否继续?","提示",{type:"warning"}).then((function(){Object(o["d"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insertRole:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.roleForm);"CUSTOM"==e.roleForm.data_scope&&(r.team_ids=JSON.stringify(e.curchooseKeys)),Object(o["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.roleDialog=!1}))}}))},updateRole:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.roleForm);"CUSTOM"==e.roleForm.data_scope&&(r.team_ids=JSON.stringify(e.curchooseKeys)),Object(o["h"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.roleDialog=!1}))}}))}}},d=u,m=(r("cbd7"),r("2877")),p=Object(m["a"])(d,a,n,!1,null,"d7933246",null);t["default"]=p.exports},7760:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return l}));var a=r("b775");function n(e){return Object(a["a"])({url:"/notice/channels",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/notice/channel/filter",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/notice/channel",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/notice/channel",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/notice/channel",method:"delete",data:e})}},"77e1":function(e,t,r){"use strict";r("7b7c")},"79e8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"服务名称"}},[r("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.handleSelect,clear:e.handleSelect},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1),r("el-form-item",{attrs:{label:"服务标志"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.service_keyword,callback:function(t){e.$set(e.queryParams,"service_keyword",t)},expression:"queryParams.service_keyword"}})],1),r("el-form-item",{attrs:{label:"构建状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[r("el-option",{attrs:{label:"成功",value:!0}}),r("el-option",{attrs:{label:"失败",value:!1}})],1)],1),r("el-form-item",{attrs:{label:"执行状态",prop:"is_finish"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.is_finish,callback:function(t){e.$set(e.queryParams,"is_finish",t)},expression:"queryParams.is_finish"}},[r("el-option",{attrs:{label:"进行中",value:!0}}),r("el-option",{attrs:{label:"执行完成",value:!1}})],1)],1),r("el-form-item",{attrs:{label:"构建时间"}},[r("el-date-picker",{attrs:{size:"small","value-format":"timestamp",clearable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.chooseTime},model:{value:e.startandend,callback:function(t){e.startandend=t},expression:"startandend"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:pack:add",expression:"'service:pack:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:pack_log:page",expression:"'service:pack_log:page'"}],attrs:{data:e.List}},[r("el-table-column",{attrs:{label:"服务名称",align:"center",prop:"service_name"}}),r("el-table-column",{attrs:{label:"dockerfile名称",align:"center",prop:"dockerfile_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"代码仓库",align:"center",prop:"code_registry_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"镜像仓库",align:"center",prop:"image_registry_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"分支/标签",align:"center",prop:"clone_type","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"分支/标签值",align:"center",prop:"clone_value","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"commit_id",align:"center",prop:"commit_id","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"镜像名",align:"center",prop:"image_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"构建时长",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.use_time)+"秒")])]}}])}),r("el-table-column",{attrs:{label:"流程状态",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_finish?r("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):r("el-tag",{attrs:{type:"danger"}},[e._v("进行中")])]}}])}),r("el-table-column",{attrs:{label:"构建人员",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"构建详情",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"left",width:"400",trigger:"click"}},[r("div",{staticClass:"desc-box"},e._l(e.getDescList(t.row.desc),(function(t,a){return r("div",{key:a,staticClass:"desc-item"},[e._v(" "+e._s(a+1)+" : "+e._s(t)+" ")])})),0),r("el-button",{attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-tickets"},slot:"reference"},[e._v("查看")])],1)]}}])}),r("el-table-column",{attrs:{label:"构建状态",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("成功")]):!1===t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v("失败")]):r("el-tag",{attrs:{type:"info"}},[e._v("构建中")])]}}])}),r("el-table-column",{attrs:{label:"构建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"400px",title:"服务构建",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"服务名称",prop:"keyword"}},[r("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,clearable:"","value-key":"show_name",placeholder:"请选择服务"},on:{select:e.handleSelectService,clear:e.handleSelectService},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1),r("el-form-item",{attrs:{label:"标签/分支",prop:"status"}},[r("el-radio-group",{model:{value:e.form.clone_type,callback:function(t){e.$set(e.form,"clone_type",t)},expression:"form.clone_type"}},[r("el-radio",{attrs:{label:"branch"}},[e._v("分支")]),r("el-radio",{attrs:{label:"tag"}},[e._v("标签")])],1)],1),"tag"==e.form.clone_type&&e.valueLoading?r("el-form-item",{attrs:{label:"标签值",prop:"clone_value"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.selectTag},model:{value:e.form.tag_template,callback:function(t){e.$set(e.form,"tag_template",t)},expression:"form.tag_template"}},e._l(e.tags,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name+"（"+e.commit_name+" | "+e.commit_time+"）",value:e.name}})})),1)],1):e._e(),"branch"==e.form.clone_type&&e.valueLoading?r("el-form-item",{attrs:{label:"分支值",prop:"clone_value"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.selectBranch},model:{value:e.form.branch_template,callback:function(t){e.$set(e.form,"branch_template",t)},expression:"form.branch_template"}},e._l(e.branches,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name+"（"+e.commit_name+"｜"+e.commit_time+"）",value:e.name}})})),1)],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("ac1f"),r("1276"),r("96cf"),r("b775"));function o(e){return Object(s["a"])({url:"service/pack_log/page",method:"get",params:e})}function l(e){return Object(s["a"])({url:"service/pack",method:"post",data:e})}var c=r("53d2"),u=r("b8a4"),d={name:"User",data:function(){return{startandend:[],loading:!1,queryParams:{page:1,count:10,keyword:void 0},valueLoading:!1,List:[],total:0,tempValue:"",curService:{},dialog:!1,form:{},rules:{clone_type:[{required:!0,trigger:"blur",message:"构建类型不能为空"}],clone_value:[{required:!0,trigger:"blur",message:"分支/标签不能为空"}],commit_id:[{required:!0,trigger:"blur",message:"commit_id不能为空"}],service_keyword:[{required:!0,trigger:"blur",message:"服务标志不能为空"}]},branches:[],tags:[]}},created:function(){},methods:{handleSelectService:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&e.id){r.next=3;break}return t.resetQuery(),r.abrupt("return");case 3:if(t.form.service_keyword!=e.keyword){r.next=5;break}return r.abrupt("return");case 5:return t.valueLoading=!1,t.queryParams.service_keyword=e.keyword,t.form.service_keyword=e.keyword,r.next=10,Object(u["h"])({service_keyword:e.keyword});case 10:return t.branches=r.sent,r.next=13,Object(u["i"])({service_keyword:e.keyword});case 13:t.tags=r.sent,t.valueLoading=!0;case 15:case"end":return r.stop()}}),r)})))()},selectTag:function(e){var t={};for(var r in this.tags)this.tags[r].name==e&&(t=this.tags[r]);this.form.commit_id=t.commit_id,this.form.clone_value=t.name},selectBranch:function(e){var t={};for(var r in this.branches)this.branches[r].name==e&&(t=this.branches[r]);this.form.commit_id=t.commit_id,this.form.clone_value=t.name},handleAdd:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.service_keyword!=e.queryParams.service_keyword&&(e.form={}),e.form.service_keyword||!e.queryParams.service_keyword){t.next=10;break}return e.form.service_keyword=e.queryParams.service_keyword,t.next=5,Object(u["h"])({service_keyword:e.form.service_keyword});case 5:return e.branches=t.sent,t.next=8,Object(u["i"])({service_keyword:e.form.service_keyword});case 8:e.tags=t.sent,e.valueLoading=!0;case 10:e.dialog=!0;case 11:case"end":return t.stop()}}),t)})))()},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);l(r).then((function(t){e.$message({message:"请求构建成功",type:"success"}),e.dialog=!1,e.getList()}))}}))},getDescList:function(e){return e?e.split("\n"):[]},getServices:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])({page:1,count:10,name:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},querySearchAsync:function(e,t){if(!e||!e.length)return[];this.getServices(e).then((function(e){for(var r in e.list)e.list[r].show_name=e.list[r].name+"("+e.list[r].keyword+")";t(e.list)}))},handleSelect:function(e){e&&e.id?(this.queryParams.service_keyword=e.keyword,this.getList()):this.resetQuery()},chooseTime:function(e){this.queryParams.start=e[0]/1e3,this.queryParams.end=e[1]/1e3},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.queryParams.keyword&&(e.List=[],e.loading=!1,e.total=0),t.next=3,o(e.queryParams);case 3:r=t.sent,e.List=r.list,e.loading=!1,e.total=r.total;case 7:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,start:void 0,end:void 0,status:void 0},this.startandend=[]},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()}}},m=d,p=(r("18dd"),r("2877")),f=Object(p["a"])(m,a,n,!1,null,"33b9c60b",null);t["default"]=f.exports},"7abe":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[r("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[r("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("newVisitis")}}},[r("div",{staticClass:"card-panel-icon-wrapper icon-people"},[r("svg-icon",{attrs:{"icon-class":"peoples","class-name":"card-panel-icon"}})],1),r("div",{staticClass:"card-panel-description"},[r("div",{staticClass:"card-panel-text"},[e._v(" 用户中心 ")]),r("el-link",{attrs:{type:"primary",href:"https://element.eleme.io"}},[e._v("使用手册")])],1)])]),r("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[r("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("purchases")}}},[r("div",{staticClass:"card-panel-icon-wrapper icon-money"},[r("i",{staticClass:"el-icon-menu card-panel-icon"})]),r("div",{staticClass:"card-panel-description"},[r("div",{staticClass:"card-panel-text"},[e._v(" 服务中心 ")]),r("el-link",{attrs:{type:"primary",href:"https://element.eleme.io"}},[e._v("使用手册")])],1)])]),r("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[r("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("shoppings")}}},[r("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[r("i",{staticClass:"el-icon-tickets card-panel-icon"})]),r("div",{staticClass:"card-panel-description"},[r("div",{staticClass:"card-panel-text"},[e._v(" 配置中心 ")]),r("el-link",{attrs:{type:"primary",href:"https://element.eleme.io"}},[e._v("使用手册")])],1)])]),r("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[r("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("messages")}}},[r("div",{staticClass:"card-panel-icon-wrapper icon-message"},[r("svg-icon",{attrs:{"icon-class":"message","class-name":"card-panel-icon"}})],1),r("div",{staticClass:"card-panel-description"},[r("div",{staticClass:"card-panel-text"},[e._v(" 告警中心 ")]),r("el-link",{attrs:{type:"primary",href:"https://element.eleme.io"}},[e._v("使用手册")])],1)])])],1)],1)],1)},n=[],i={name:"Home",data:function(){return{}},computed:{},created:function(){}},s=i,o=(r("77e1"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"22871538",null);t["default"]=l.exports},"7b7c":function(e,t,r){},"7e9d":function(e,t,r){},8370:function(e,t,r){"use strict";r("9bbc")},9661:function(e,t,r){"use strict";r("2964")},"9bbc":function(e,t,r){},"9f78":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{directives:[{name:"permission",rawName:"v-permission",value:"service:image_registry:add",expression:"'service:image_registry:add'"}],attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:image_registry:all",expression:"'service:image_registry:all'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"仓库名",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库地址",align:"center",prop:"host","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库协议",align:"center",prop:"protocol","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库账号",align:"center",prop:"username","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库密码",align:"center",prop:"password","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"记录数量",align:"center",prop:"history_count","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库描述",align:"center",prop:"desc","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:image_registry:connect",expression:"'service:image_registry:connect'"}],attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-sort"},on:{click:function(r){return e.handleConnect(t.row)}},slot:"reference"},[e._v(" 连接测试 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:image_registry:update",expression:"'service:image_registry:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:image_registry:delete",expression:"'service:image_registry:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{width:"400px",title:e.insertDialog?"新增镜像仓库配置":"修改镜像仓库配置",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"仓库名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"仓库地址",prop:"host"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库地址"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),r("el-form-item",{attrs:{label:"仓库协议",prop:"protocol"}},[r("el-radio-group",{model:{value:e.form.protocol,callback:function(t){e.$set(e.form,"protocol",t)},expression:"form.protocol"}},[r("el-radio",{attrs:{label:"https"}},[e._v("https")]),r("el-radio",{attrs:{label:"http"}},[e._v("http")])],1)],1),r("el-form-item",{attrs:{label:"仓库账号",prop:"token"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库账户"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"仓库密码",prop:"token"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"记录数量",prop:"history_count"}},[r("el-input-number",{attrs:{min:3,max:100},model:{value:e.form.history_count,callback:function(t){e.$set(e.form,"history_count",t)},expression:"form.history_count"}})],1),r("el-form-item",{attrs:{label:"仓库描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("e2ab")),o={data:function(){return{list:[],form:{},types:[],dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,rules:{protocol:[{required:!0,trigger:"blur",message:"仓库协议不能为空"}],name:[{required:!0,trigger:"blur",message:"仓库名称不能为空"}],host:[{required:!0,trigger:"blur",message:"仓库地址不能为空"}],username:[{required:!0,trigger:"blur",message:"仓库token不能为空"}],history_count:[{required:!0,trigger:"blur",message:"副本数量不能为空"}]}}},computed:{},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:e.list=t.sent,e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},handleConnect:function(e){var t=this,r=this.$loading({lock:!0,text:"连接测试中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(s["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"连接成功!"}),r.close()})).catch((function(){r.close()}))},handleAdd:function(){this.form={},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.form=this.deepClone(e),this.form.password="",this.dialog=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该镜像仓库, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["c"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(s["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},update:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(s["e"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},l=o,c=r("2877"),u=Object(c["a"])(l,a,n,!1,null,null,null);t["default"]=u.exports},a0c8:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{directives:[{name:"permission",rawName:"v-permission",value:"system:log:page",expression:"'system:log:page'"}],staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"通知标题"}},[r("el-input",{attrs:{placeholder:"请输入通知标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),r("el-form-item",{attrs:{label:"通知时间"}},[r("el-date-picker",{attrs:{size:"small","value-format":"timestamp",clearable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.chooseTime},model:{value:e.startandend,callback:function(t){e.startandend=t},expression:"startandend"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.List}},[r("el-table-column",{attrs:{label:"cid",align:"center",prop:"cid"}}),r("el-table-column",{attrs:{label:"标题",align:"center",prop:"title","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"内容",align:"center",prop:"content","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"规则",align:"center",prop:"rule","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"人员",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(JSON.parse(t.row.users),(function(t,a){return r("div",{key:a},[r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.name))])],1)}))}}])}),r("el-table-column",{attrs:{label:"通道",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(JSON.parse(t.row.channels),(function(t,a){return r("div",{key:a},[r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.name))])],1)}))}}])}),r("el-table-column",{attrs:{label:"时间",align:"center",prop:"created_at","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("b775"));function o(e){return Object(s["a"])({url:"/notice/log/page",method:"get",params:e})}var l={name:"User",data:function(){return{startandend:[],loading:!0,queryParams:{page:1,count:10,start:void 0,end:void 0,status:void 0},List:[],total:0}},created:function(){this.getList()},methods:{chooseTime:function(e){this.queryParams.start=e[0]/1e3,this.queryParams.end=e[1]/1e3},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o(e.queryParams);case 2:r=t.sent,e.List=r.list,e.loading=!1,e.total=r.total;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,start:void 0,end:void 0,status:void 0},this.startandend=[]},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()}}},c=l,u=(r("4b3d"),r("2877")),d=Object(u["a"])(c,a,n,!1,null,"1dc5390c",null);t["default"]=d.exports},a199:function(e,t,r){"use strict";r("1da1"),r("96cf"),r("ac1f"),r("5319"),r("d3b7"),r("25f0"),r("1276"),r("4360"),r("5c96"),r("5f87"),r("3438")},a36b:function(e,t,r){e.exports=r.p+"static/img/404.a57b6f31.png"},a47a:function(e,t,r){"use strict";r("ed72")},a507:function(e,t,r){},a5e5:function(e,t,r){},a6dc:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return o}));var a=r("b775");function n(e){return Object(a["a"])({url:"/ums/menu",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/ums/menu",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/ums/menu",method:"put",data:e})}function o(e){return Object(a["a"])({url:"/ums/menu",method:"delete",data:e})}},a98b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"服务名",prop:"service_name"}},[r("el-input",{attrs:{placeholder:"请输入服务名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.service_name,callback:function(t){e.$set(e.queryParams,"service_name",t)},expression:"queryParams.service_name"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"configure:service_log:list",expression:"'configure:service_log:list'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"操作服务",align:"center",prop:"service_name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作类别",align:"center",prop:"title","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作详情",align:"center",prop:"content","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("b775"));function o(e){return Object(s["a"])({url:"cms/configure_log/list",method:"get",params:e})}var l={data:function(){return{list:[],form:{},loading:!0,queryParams:{page:1,count:10,service_name:void 0},total:0}},computed:{},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o(e.queryParams);case 2:r=t.sent,e.list=r.list,e.loading=!1,e.total=r.total;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,keyword:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()}}},c=l,u=(r("8370"),r("2877")),d=Object(u["a"])(c,a,n,!1,null,"adf4c102",null);t["default"]=d.exports},a9bd:function(e,t,r){"use strict";r("e3f8")},abe7:function(e,t,r){},b0fb:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"notice:notice:query",expression:"'notice:notice:query'"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"通知名称"}},[r("el-input",{attrs:{placeholder:"请输入通知标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),r("el-form-item",{attrs:{label:"通知状态"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[r("el-option",{attrs:{label:"正常",value:"true"}}),r("el-option",{attrs:{label:"禁用",value:"false"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{directives:[{name:"permission",rawName:"v-permission",value:"notice:notice:add",expression:"'notice:notice:add'"}],attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"cid",align:"center",prop:"id","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"标题",align:"center",prop:"title","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"规则",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",[e._v(e._s(e.findRuleName(t.row.rule)))])]}}])}),r("el-table-column",{attrs:{label:"规则值",align:"center",prop:"value","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"通知人员",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.users,(function(t,a){return r("div",[r("el-tag",{key:a},[e._v(e._s(t.name)+"("+e._s(t.team.name)+")")])],1)}))}}])}),r("el-table-column",{attrs:{label:"通知通道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.channels,(function(t,a){return r("div",[r("el-tag",{key:a},[e._v(e._s(t.name))])],1)}))}}])}),r("el-table-column",{attrs:{label:"通知状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?r("el-tag",[e._v("开启")]):r("el-tag",{attrs:{type:"info"}},[e._v("禁用")])]}}])}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"更新时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"notice:notice:update",expression:"'notice:notice:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"notice:notice:delete",expression:"'notice:notice:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:e.insertDialog?"新增通知":"修改通知’",visible:e.dialog,width:"400px"},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{prop:"cid",label:"通知cid"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入通知cid"},model:{value:e.form.cid,callback:function(t){e.$set(e.form,"cid",t)},expression:"form.cid"}})],1),r("el-form-item",{attrs:{prop:"title",label:"通知标题"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入通知标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e.updateDialog?r("el-form-item",{attrs:{prop:"status",label:"通知状态"}},[r("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1):e._e(),r("el-form-item",{attrs:{prop:"rule",label:"通知规则"}},[r("el-select",{attrs:{placeholder:"请选择规则"},model:{value:e.form.rule,callback:function(t){e.$set(e.form,"rule",t)},expression:"form.rule"}},e._l(e.ruleOption,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.form.rule&&"default"!=e.form.rule?r("el-form-item",{attrs:{label:"规则值"}},[r("el-input-number",{attrs:{min:1},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1):e._e(),r("el-form-item",{attrs:{prop:"rule",label:"通知通道"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择通道"},model:{value:e.form.channel_ids,callback:function(t){e.$set(e.form,"channel_ids",t)},expression:"form.channel_ids"}},e._l(e.channels,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{prop:"rule",label:"通知人员"}},[r("el-select",{attrs:{filterable:"",remote:"",loading:e.searchLoading,"remote-method":e.searchUser,multiple:"",placeholder:"请选择通道"},model:{value:e.form.user_ids,callback:function(t){e.$set(e.form,"user_ids",t)},expression:"form.user_ids"}},e._l(e.users,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"("+e.team.name+")",value:e.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.insertData()}}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("498a"),r("e9c4"),r("96cf"),r("c0c7")),o=r("7760"),l=r("b775");function c(e){return Object(l["a"])({url:"/notice/notice/page",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/notice/notice",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/notice/notice",method:"put",data:e})}function m(e){return Object(l["a"])({url:"/notice/notice",method:"delete",data:e})}var p={data:function(){return{list:[],form:{},dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,searchLoading:!1,channels:[],users:[],queryParams:{page:1,count:10,title:null,status:null},ruleOption:[{value:"default",label:"默认通知"},{value:"lcount",label:"限次通知"},{value:"ltime",label:"限时通知（秒）"}],total:0,rules:{cid:[{required:!0,trigger:"blur",message:"通知cid不能为空"}],title:[{required:!0,trigger:"blur",message:"通知标题不能为空"}],rule:[{required:!0,trigger:"blur",message:"通知规则不能为空"}]}}},computed:{},created:function(){this.getChannels(),this.getList()},methods:{findRuleName:function(e){for(var t in this.ruleOption)if(this.ruleOption[t].value==e)return this.ruleOption[t].label},getChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])(e.queryParams);case 2:e.channels=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c(e.queryParams);case 2:r=t.sent,e.loading=!1,e.total=r.total,e.list=r.list;case 6:case"end":return t.stop()}}),t)})))()},searchUser:function(e){var t=this;""!=e.trim()&&(this.searchLoading=!0,Object(s["e"])({name:e,page:1,count:10}).then((function(e){t.users=e.list,t.searchLoading=!1})))},handleQuery:function(){this.loading=!0,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleAdd:function(){this.form={status:!1},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){for(var t in this.form=this.deepClone(e),this.form.user_ids=JSON.parse(e.user_ids),this.users=e.users,this.form.channel_ids=[],this.form.channels)this.form.channel_ids.push(this.form.channels[t].id);this.insertDialog=!1,this.updateDialog=!0,this.dialog=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该通知, 是否继续?","提示",{type:"warning"}).then((function(){m({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insertData:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);r.user_ids=JSON.stringify(r.user_ids),u(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},updateData:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);r.user_ids=JSON.stringify(r.user_ids),d(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},f=p,g=(r("efcc"),r("2877")),v=Object(g["a"])(f,a,n,!1,null,"53432fc4",null);t["default"]=v.exports},b277:function(e,t,r){"use strict";r("c93d")},b380:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{directives:[{name:"permission",rawName:"v-permission",value:"system:log:page",expression:"'system:log:page'"}],staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"登陆账号"}},[r("el-input",{attrs:{placeholder:"请输入登陆账号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",{attrs:{label:"登陆时间"}},[r("el-date-picker",{attrs:{size:"small","value-format":"timestamp",clearable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.chooseTime},model:{value:e.startandend,callback:function(t){e.startandend=t},expression:"startandend"}})],1),r("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[r("el-option",{attrs:{label:"正常",value:!0}}),r("el-option",{attrs:{label:"禁用",value:!1}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.List}},[r("el-table-column",{attrs:{label:"登陆账号",align:"center",prop:"username"}}),r("el-table-column",{attrs:{label:"ip地址",align:"center",prop:"ip","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"登陆地址",align:"center",prop:"address","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"浏览器",align:"center",prop:"browser","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"设备",align:"center",prop:"device","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"状态",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("成功")]):r("el-tag",{attrs:{type:"danger"}},[e._v("失败")])]}}])}),r("el-table-column",{attrs:{label:"登陆备注",align:"center",prop:"description","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"登陆时间",align:"center",prop:"created_at","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("b775"));function o(e){return Object(s["a"])({url:"/ums/login/log",method:"get",params:e})}r("a199");var l={name:"User",data:function(){return{startandend:[],loading:!0,queryParams:{page:1,count:10,start:void 0,end:void 0,status:void 0},List:[],total:0}},created:function(){this.getList()},methods:{chooseTime:function(e){this.queryParams.start=e[0]/1e3,this.queryParams.end=e[1]/1e3},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o(e.queryParams);case 2:r=t.sent,e.List=r.list,e.loading=!1,e.total=r.total;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,start:void 0,end:void 0,status:void 0},this.startandend=[]},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()}}},c=l,u=(r("d202"),r("2877")),d=Object(u["a"])(c,a,n,!1,null,"3987c63e",null);t["default"]=d.exports},b81c:function(e,t,r){},b8a4:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"g",(function(){return i})),r.d(t,"h",(function(){return s})),r.d(t,"i",(function(){return o})),r.d(t,"f",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"j",(function(){return d})),r.d(t,"c",(function(){return m})),r.d(t,"b",(function(){return p}));var a=r("b775");function n(e){return Object(a["a"])({url:"service/code_registries",method:"get",params:e})}function i(e){return Object(a["a"])({url:"service/code_registry/project",method:"get",params:e})}function s(e){return Object(a["a"])({url:"service/code_registry/branches",method:"get",params:e})}function o(e){return Object(a["a"])({url:"service/code_registry/tags",method:"get",params:e})}function l(e){return Object(a["a"])({url:"service/code_registry/types",method:"get",params:e})}function c(e){return Object(a["a"])({url:"service/code_registry/clone_types",method:"get",params:e})}function u(e){return Object(a["a"])({url:"service/code_registry",method:"post",data:e})}function d(e){return Object(a["a"])({url:"service/code_registry",method:"put",data:e})}function m(e){return Object(a["a"])({url:"service/code_registry",method:"delete",data:e})}function p(e){return Object(a["a"])({url:"service/code_registry/connect",method:"post",data:e})}},bcda:function(e,t,r){"use strict";r("1b55")},bd46:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return o}));var a=r("b775");function n(){return Object(a["a"])({url:"/ums/team",method:"get"})}function i(e){return Object(a["a"])({url:"/ums/team",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/ums/team",method:"put",data:e})}function o(e){return Object(a["a"])({url:"/ums/team",method:"delete",data:e})}},c93d:function(e,t,r){},ca86:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return o}));var a=r("b775");function n(e){return Object(a["a"])({url:"service/dockerfile/page",method:"get",params:e})}function i(e){return Object(a["a"])({url:"service/dockerfile",method:"post",data:e})}function s(e){return Object(a["a"])({url:"service/dockerfile",method:"put",data:e})}function o(e){return Object(a["a"])({url:"service/dockerfile",method:"delete",data:e})}},caef:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"选择服务"}},[r("el-autocomplete",{attrs:{clearable:"",size:"small","fetch-suggestions":e.querySearchAsync,"value-key":"show_name",placeholder:"请输入服务"},on:{select:e.handleSelect,clear:e.handleSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:field:add",expression:"'configure:field:add'"}],attrs:{disabled:!e.curService.id,type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"configure:field:page",expression:"'configure:field:page'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"字段",align:"center",prop:"field","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"描述",align:"center",prop:"description","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"更新时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:field_value:query",expression:"'configure:field_value:query'"}],attrs:{size:"mini",type:"text",icon:"el-icon-set-up"},on:{click:function(r){return e.handleUpdateValue(t.row)}}},[e._v("值配置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:field:update",expression:"'configure:field:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:field:delete",expression:"'configure:field:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"400px",title:e.insertDialog?"新增服务":"修改服务",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"所属服务",required:""}},[r("el-input",{attrs:{disabled:!0,size:"medium",autocomplete:"off"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),r("el-form-item",{attrs:{label:"字段标志",prop:"field"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入服务标识"},model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}},[r("template",{slot:"prepend"},[e._v(" "+e._s(e.curService.keyword)+". ")])],2)],1),r("el-form-item",{attrs:{label:"字段说明",prop:"description"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入字段说明"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1),r("el-dialog",{attrs:{width:"700px",title:"值配置",visible:e.valueDialog},on:{"update:visible":function(t){e.valueDialog=t}}},[r("el-form",{ref:"form",staticClass:"dialog-form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},e._l(e.envs,(function(t,a){return r("el-form-item",{key:a,attrs:{label:t.name+":"+t.keyword,prop:"type"}},e._l(e.envValues,(function(n,i){return r("div",{key:i},[n.env_keyword==t.keyword?r("el-input",{attrs:{size:"medium",type:"textarea",rows:4,autocomplete:"off",placeholder:"请输入值"},model:{value:e.envValues[a].value,callback:function(t){e.$set(e.envValues[a],"value",t)},expression:"envValues[index].value"}}):e._e()],1)})),0)})),1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.valueDialog=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"configure:field_value:update",expression:"'configure:field_value:update'"}],attrs:{type:"primary"},on:{click:e.updateFieldValue}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("e9c4"),r("ac1f"),r("1276"),r("96cf"),r("53d2")),o=r("b775");function l(e){return Object(o["a"])({url:"configure/field/page",method:"get",params:e})}function c(e){return Object(o["a"])({url:"configure/field",method:"post",data:e})}function u(e){return Object(o["a"])({url:"configure/field",method:"put",data:e})}function d(e){return Object(o["a"])({url:"configure/field",method:"delete",data:e})}function m(e){return Object(o["a"])({url:"configure/field_value",method:"get",params:e})}function p(e){return Object(o["a"])({url:"configure/field_value",method:"post",data:e})}var f={data:function(){return{envs:[],list:[],form:{},loading:!1,value:"",dialog:!1,updateDialog:!1,insertDialog:!1,serviceList:[],curService:{},valueDialog:!1,envValues:[],queryParams:{page:1,count:10,service_id:void 0},total:0,config:{},rules:{type:[{required:!0,trigger:"blur",message:"字段类型不能为空"}],field:[{required:!0,trigger:"blur",message:"字段标志不能为空"}],description:[{required:!0,trigger:"blur",message:"字段描述不能为空"}]}}},computed:{},created:function(){},methods:{getServices:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["f"])({page:1,count:10,name:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},querySearchAsync:function(e,t){if(!e||!e.length)return[];this.getServices(e).then((function(e){for(var r in e.list)e.list[r].show_name=e.list[r].name+"("+e.list[r].keyword+")";t(e.list)}))},handleSelect:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&e.id){r.next=3;break}return t.resetQuery(),r.abrupt("return");case 3:t.curService=e,t.getList();case 6:case"end":return r.stop()}}),r)})))()},handleUpdateValue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["d"])({srv_id:t.curService.id});case 2:return t.envs=r.sent,t.form=t.deepClone(e),r.next=6,m({field_id:e.id});case 6:for(n in a=r.sent,t.envValues=[],t.envs){for(o in i=!1,a)t.envs[n].keyword==a[o].env_keyword&&(t.envValues.push(a[o]),i=!0);i||t.envValues.push({env_keyword:t.envs[n].keyword,value:""})}t.valueDialog=!0;case 10:case"end":return r.stop()}}),r)})))()},updateFieldValue:function(){var e=this;p({data:this.envValues,field_id:this.form.id}).then((function(t){e.$message({message:"更新成功",type:"success"}),e.valueDialog=!1}))},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.curService.id){t.next=3;break}return e.loading=!1,t.abrupt("return");case 3:return t.next=5,l(e.queryParams);case 5:r=t.sent,e.list=r.list,e.loading=!1,e.total=r.total;case 9:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.curService={},this.list=[],this.value=void 0,this.queryParams={page:1,count:10,keyword:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleAdd:function(){this.form={service_keyword:this.curService.keyword},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.form=JSON.parse(JSON.stringify(e)),this.form.field=this.form.field.split(".")[1],this.dialog=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该服务, 是否继续?","提示",{type:"warning"}).then((function(){d({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);r.field=e.curService.keyword+"."+r.field,c(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},update:function(){var e=this;this.form.config=JSON.stringify(this.config),this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);r.field=e.curService.keyword+"."+r.field,u(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},g=f,v=(r("5792"),r("2877")),h=Object(v["a"])(g,a,n,!1,null,"a9bf01c8",null);t["default"]=h.exports},cb81:function(e,t,r){"use strict";r.d(t,"f",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return l})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return u}));var a=r("b775");function n(e){return Object(a["a"])({url:"service/release/page",method:"get",params:e})}function i(e){return Object(a["a"])({url:"service/release/types",method:"get",params:e})}function s(e){return Object(a["a"])({url:"service/release/images",method:"get",params:e})}function o(e){return Object(a["a"])({url:"service/release/status",method:"get",params:e})}function l(e){return Object(a["a"])({url:"service/release",method:"post",data:e})}function c(e){return Object(a["a"])({url:"service/release",method:"put",data:e})}function u(e){return Object(a["a"])({url:"service/release",method:"delete",data:e})}},cbd7:function(e,t,r){"use strict";r("1206")},cc62:function(e,t,r){"use strict";r("2a7c")},cc6c:function(e,t,r){e.exports=r.p+"static/img/401.089007e7.gif"},cfa5:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"sdep"},[r("div",[r("el-button",{attrs:{size:e.size},on:{click:e.chooseTeam}},[r("div",{staticClass:"button"},[0!=e.chooseKeys.length?r("div",{staticClass:"button-item"},[r("el-tag",{attrs:{size:"mini"}},[e._v("已选部门")]),r("el-tag",{attrs:{size:"mini"}},[e._v(e._s(e.chooseKeys.length)+" 个")])],1):r("div",{staticClass:"item"},[e._v("点击选择部门")])])])],1)]),r("el-dialog",{attrs:{title:"选择部门",visible:e.dialogVisible,width:"425px","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"flex",staticStyle:{"margin-top":"20px"}},[r("div",{staticClass:"label"},[e._v("选择部门：")]),r("div",{staticClass:"team-box"},[r("el-tree",{ref:"team",attrs:{"node-key":"id",data:e.team,"show-checkbox":"","check-strictly":!1,props:{label:"name"}}})],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.getCheckedKeys}},[e._v("确 定")])],1)])],1)},n=[],i={props:{team:{type:Array,default:[]},keys:{type:Array,default:[]},size:{type:String,default:"medium"}},watch:{keys:{immediate:!0,deep:!0,handler:function(e,t){this.chooseKeys=e}}},data:function(){return{dialogVisible:!1,chooseKeys:[]}},mounted:function(){},methods:{setCheckedKeys:function(){if(this.team.length>0){var e=this.getTreeIds(this.team[0]);for(var t in e){var r=e[t];this.$refs.team.setChecked(r,-1!=this.chooseKeys.indexOf(r))}}},chooseTeam:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.setCheckedKeys()}))},getCheckedKeys:function(){var e=this.$refs.team.getCheckedKeys();this.$emit("confirm",e),this.dialogVisible=!1}}},s=i,o=(r("cc62"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"0f27b8e8",null);t["default"]=l.exports},d202:function(e,t,r){"use strict";r("7e9d")},d2e9:function(e,t,r){},d36a:function(e,t,r){"use strict";r("3683")},e2ab:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return l}));var a=r("b775");function n(e){return Object(a["a"])({url:"service/image_registries",method:"get",params:e})}function i(e){return Object(a["a"])({url:"service/image_registry",method:"post",data:e})}function s(e){return Object(a["a"])({url:"service/image_registry",method:"put",data:e})}function o(e){return Object(a["a"])({url:"service/image_registry",method:"delete",data:e})}function l(e){return Object(a["a"])({url:"service/image_registry/connect",method:"post",data:e})}},e3f8:function(e,t,r){},e60d:function(e,t,r){},ec2d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{directives:[{name:"permission",rawName:"v-permission",value:"service:code_registry:add",expression:"'service:code_registry:add'"}],attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:code_registry:all",expression:"'service:code_registry:all'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"仓库名",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库类型",align:"center",prop:"type","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库地址",align:"center",prop:"host","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"下载方式",align:"center",prop:"clone_type","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库token",align:"center",prop:"token","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"仓库描述",align:"center",prop:"desc","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:code_registry:connect",expression:"'service:code_registry:connect'"}],attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-sort"},on:{click:function(r){return e.handleConnect(t.row)}},slot:"reference"},[e._v(" 连接测试 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:code_registry:update",expression:"'service:code_registry:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:code_registry:delete",expression:"'service:code_registry:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{width:"400px",title:e.insertDialog?"新增代码仓库配置":"修改代码仓库配置",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"仓库名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"仓库类型",prop:"type",size:"medium"}},[r("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.types,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",{attrs:{label:"仓库地址",prop:"host"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库地址"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),r("el-form-item",{attrs:{label:"token",prop:"token"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入仓库token"},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1),r("el-form-item",{attrs:{label:"下载方式",prop:"clone_type",size:"medium"}},[r("el-select",{model:{value:e.form.clone_type,callback:function(t){e.$set(e.form,"clone_type",t)},expression:"form.clone_type"}},e._l(e.cloneTypes,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",{attrs:{label:"仓库描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("b8a4")),o={data:function(){return{list:[],form:{},types:[],cloneTypes:[],dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,rules:{name:[{required:!0,trigger:"blur",message:"仓库名称不能为空"}],type:[{required:!0,trigger:"blur",message:"仓库类型不能为空"}],host:[{required:!0,trigger:"blur",message:"仓库地址不能为空"}],clone_type:[{required:!0,trigger:"blur",message:"仓库下载类型不能为空"}]}}},computed:{},created:function(){this.getList(),this.getTypes(),this.getCloneTypes()},methods:{getTypes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["f"])();case 2:e.types=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getCloneTypes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])();case 2:e.cloneTypes=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:e.list=t.sent,e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},handleConnect:function(e){var t=this,r=this.$loading({lock:!0,text:"连接测试中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(s["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"连接成功!"}),r.close()})).catch((function(){r.close()}))},handleAdd:function(){this.form={},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.form=this.deepClone(e),this.form.token="",this.dialog=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该代码仓库, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["c"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(s["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},update:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(s["j"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},l=o,c=r("2877"),u=Object(c["a"])(l,a,n,!1,null,null,null);t["default"]=u.exports},ecc7:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{directives:[{name:"permission",rawName:"v-permission",value:"service:environment:add",expression:"'service:environment:add'"}],attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAddEnv}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:environment:all",expression:"'service:environment:all'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"标志符",align:"center",prop:"keyword","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"环境名",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"运行模式",align:"center",prop:"type","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"连接地址",align:"center",prop:"host","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"链接token",align:"center",prop:"token","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"命名空间",align:"center",prop:"namespace","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用"},on:{change:function(r){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"备注",align:"center",prop:"description","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:environment:connect",expression:"'service:environment:connect'"}],attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-sort"},on:{click:function(r){return e.handleConnectEnv(t.row)}},slot:"reference"},[e._v("连接测试")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:environment:update",expression:"'service:environment:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdateEnv(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:environment:delete",expression:"'service:environment:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDeleteEnv(t.row)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{width:"500px",title:e.insertEnvDialog?"新增环境":"修改环境",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"环境标识",prop:"keyword"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入环境标识"},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1),r("el-form-item",{attrs:{label:"环境名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入环境名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"环境备注",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),r("el-form-item",{attrs:{label:"运行模式",prop:"type"}},[r("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.types,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1)],1),r("el-form-item",{attrs:{label:"连接地址",prop:"host"}},[r("el-input",{model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),r("el-form-item",{attrs:{label:"连接token",prop:"token"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1),"k8s"==e.form.type?r("el-form-item",{attrs:{label:"命名空间",prop:"namespace"}},[r("el-input",{model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}})],1):e._e(),r("el-form-item",{attrs:{label:"环境状态",prop:"status"}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-radio",{attrs:{label:!0}},[e._v("正常")]),r("el-radio",{attrs:{label:!1}},[e._v("禁用")])],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertEnvDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertEnv}},[e._v("确 定")]):e._e(),e.updateEnvDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateEnv}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("b0c0"),r("e9c4"),r("96cf"),r("cb81")),o=r("ed84"),l={data:function(){return{list:[],form:{},types:{},dialog:!1,updateEnvDialog:!1,insertEnvDialog:!1,loading:!0,rules:{name:[{required:!0,trigger:"blur",message:"环境名称不能为空"}],keyword:[{required:!0,trigger:"blur",message:"环境标识不能为空"}],description:[{required:!0,trigger:"blur",message:"环境描述件不能为空"}],status:[{required:!0,trigger:"blur",message:"环境状态不能为空"}],type:[{required:!0,trigger:"blur",message:"运行模式不能为空"}],host:[{required:!0,trigger:"blur",message:"连接地址不能为空"}],token:[{required:!0,trigger:"blur",message:"连接token不能为空"}]},connectStatus:void 0}},computed:{},created:function(){this.getEnvs(),this.getReleaseTypes()},methods:{getEnvs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:e.list=t.sent,e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},getReleaseTypes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])();case 2:e.types=t.sent;case 3:case"end":return t.stop()}}),t)})))()},handleStatusChange:function(e){var t=this,r=!1===e.status?"禁用 ":"启用";this.$confirm('确认要"'+r+'""'+e.name+'"环境吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["e"])({id:e.id,status:e.status})})).then((function(){t.$message({message:r+"成功",type:"success"})})).catch((function(){e.status=!1===e.status}))},handleAddEnv:function(){this.form={status:!0,weight:0},this.insertEnvDialog=!0,this.updateEnvDialog=!1,this.dialog=!0},handleUpdateEnv:function(e){this.insertEnvDialog=!1,this.updateEnvDialog=!0,this.form=JSON.parse(JSON.stringify(e)),this.dialog=!0},handleDeleteEnv:function(e){var t=this;this.$confirm("此操作将删除该环境, 是否继续?","提示",{type:"warning"}).then((function(){Object(o["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getEnvs()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insertEnv:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(o["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getEnvs(),e.dialog=!1}))}}))},updateEnv:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(o["e"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getEnvs(),e.dialog=!1}))}}))}}},c=l,u=(r("a9bd"),r("2877")),d=Object(u["a"])(c,a,n,!1,null,"063da5f8",null);t["default"]=d.exports},ed72:function(e,t,r){},ed84:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return l}));var a=r("b775");function n(e){return Object(a["a"])({url:"service/environments",method:"get",params:e})}function i(e){return Object(a["a"])({url:"service/environment/filter",method:"get",params:e})}function s(e){return Object(a["a"])({url:"service/environment",method:"post",data:e})}function o(e){return Object(a["a"])({url:"service/environment",method:"put",data:e})}function l(e){return Object(a["a"])({url:"service/environment",method:"delete",data:e})}},efcc:function(e,t,r){"use strict";r("6574")},f794:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{directives:[{name:"permission",rawName:"v-permission",value:"system:menu:tree",expression:"'system:menu:tree'"}],staticClass:"box-card"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.List,"row-key":"id","tree-props":{children:"children"}}},[r("el-table-column",{attrs:{label:"菜单名称",align:"left",width:"250",prop:"icon"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.icon?r("i",{class:"el-icon-"+t.row.icon}):e._e(),e._v(" "+e._s(t.row.title)+" ")]}}])}),r("el-table-column",{attrs:{label:"路径/接口",align:"left",prop:"path","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"类型",align:"left",prop:"hidden","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["R"===t.row.type?r("el-tag",{attrs:{effect:"dark",type:"primary"}},[e._v("根菜单")]):e._e(),"M"===t.row.type?r("el-tag",{attrs:{effect:"dark",type:"primary"}},[e._v("菜单")]):e._e(),"A"===t.row.type?r("el-tag",{attrs:{effect:"dark",type:"warning"}},[e._v("接口 | "+e._s(t.row.method))]):e._e(),"G"===t.row.type?r("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("接口组")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"是否隐藏",align:"left",prop:"hidden","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.hidden?r("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v(" "+e._s("A"===t.row.type?"-- --":"可见")+" ")]):r("el-tag",{attrs:{effect:"dark",type:"danger"}},[e._v("隐藏")])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"left",prop:"hidden","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("parseTime")(t.row.updated_at))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",align:"left",width:"240","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:menu:add",expression:"'system:menu:add'"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(r){return e.handleAdd(t.row)}}},[e._v("新增")]),"R"!=t.row.type?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:menu:update",expression:"'system:menu:update'"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]):e._e(),"R"!=t.row.type?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:menu:delete",expression:"'system:menu:delete'"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()],1)]}}])})],1)],1),r("el-dialog",{attrs:{title:e.insertDialog?"新增菜单":"修改菜单",visible:e.Dialog,width:"600px"},on:{"update:visible":function(t){e.Dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"上级菜单"}},[r("el-autocomplete",{attrs:{value:e.parentTitle,placeholder:"请输入内容","fetch-suggestions":e.getMenuList},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item;return[r("el-tree",{attrs:{data:a,props:{children:"children",label:"title"}},on:{"node-click":e.handleNodeClick}})]}}])},[r("i",{staticClass:"el-icon-close el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"菜单标题",prop:"title"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入菜单标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"显示排序",prop:"weight"}},[r("el-input-number",{attrs:{size:"medium","controls-position":"right",min:0},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[r("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-radio",{attrs:{label:"M",value:"M"}},[e._v("菜单")]),r("el-radio",{attrs:{label:"A",value:"A"}},[e._v("接口")]),r("el-radio",{attrs:{label:"G",value:"G"}},[e._v("接口组")])],1)],1)],1)],1),r("el-row",["A"==e.form.type?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"请求方式"}},[r("el-radio-group",{model:{value:e.form.method,callback:function(t){e.$set(e.form,"method",t)},expression:"form.method"}},[r("el-radio",{attrs:{label:"GET"}},[e._v("GET")]),r("el-radio",{attrs:{label:"POST"}},[e._v("POST")]),r("el-radio",{attrs:{label:"PUT"}},[e._v("PUT")]),r("el-radio",{attrs:{label:"DELETE"}},[e._v("DELETE")])],1)],1)],1):e._e()],1),"A"==e.form.type||"G"==e.form.type?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"权限标识"}},[r("el-input",{attrs:{size:"medium",placeholder:"请权限标识",maxlength:"50"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入路由地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1)],1)],1):e._e(),r("el-row",["M"===e.form.type?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"菜单图标"}},[r("el-popover",{attrs:{placement:"bottom-start",width:"460",trigger:"click"},on:{show:function(t){return e.$refs["iconSelect"].reset()}}},[r("IconSelect",{ref:"iconSelect",on:{selected:e.handleIconSelect}}),r("el-input",{attrs:{slot:"reference",size:"medium",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[e.form.icon?r("i",{class:"el-icon-"+e.form.icon,staticStyle:{height:"32px",width:"16px"}}):e._e()])],1)],1)],1):e._e()],1),"M"===e.form.type?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"路由名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入路由名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入组件路径"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否外链"}},[r("el-radio-group",{model:{value:e.form.is_frame,callback:function(t){e.$set(e.form,"is_frame",t)},expression:"form.is_frame"}},[r("el-radio",{attrs:{label:!0}},[e._v("是")]),r("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入路由地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1)],1)],1):e._e(),"M"===e.form.type?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"菜单状态"}},[r("el-radio-group",{model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[r("el-radio",{attrs:{label:!1}},[e._v("显示")]),r("el-radio",{attrs:{label:!0}},[e._v("隐藏")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"跳转地址",prop:"redirect"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入跳转地址"},model:{value:e.form.redirect,callback:function(t){e.$set(e.form,"redirect",t)},expression:"form.redirect"}})],1)],1)],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.Dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insertData}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],i=r("1da1"),s=(r("96cf"),r("a6dc")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon-body"},[r("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[r("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),r("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,a){return r("div",{key:a,on:{click:function(r){return e.selectedIcon(t)}}},[r("i",{class:"el-icon-"+t,staticStyle:{"font-size":"20px"}}),r("span",[e._v(e._s(t))])])})),0)],1)},l=[],c=(r("b0c0"),r("4de4"),r("d3b7"),r("caad"),r("2532"),["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"]),u=c,d={name:"IconSelect",data:function(){return{name:"",iconList:u}},methods:{filterIcons:function(){var e=this;console.log(this.iconList),this.name?this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})):this.iconList=u},selectedIcon:function(e){this.$emit("selected",e),document.body.click()},reset:function(){this.name="",this.iconList=u}}},m=d,p=(r("4bdd"),r("2877")),f=Object(p["a"])(m,o,l,!1,null,"6ccde038",null),g=f.exports,v={name:"Menu",components:{IconSelect:g},data:function(){return{loading:!0,List:[],Dialog:!1,updateDialog:!1,insertDialog:!0,parentTitle:"",form:{},rules:{title:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],weight:[{required:!0,message:"菜单排序不能为空",trigger:"blur"}],type:[{required:!0,message:"菜单类型不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{handleIconSelect:function(e){this.form.icon=e,this.$forceUpdate()},handleNodeClick:function(e){this.parentTitle=e.title,this.form.parent_id=e.id},getMenuList:function(e,t){t([this.List])},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])();case 2:r=t.sent,e.List=[r],e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},handleAdd:function(e){this.form={type:"M",weight:0,hidden:!1,is_frame:!1},this.insertDialog=this.Dialog=!0,this.updateDialog=!1,this.parentTitle=e.title,this.form.parent_id=e.id},handleUpdate:function(e){var t=this.getTreeNode(this.List[0],e.parent_id);t&&(this.parentTitle=t.title),this.updateDialog=this.Dialog=!0,this.insertDialog=!1,this.form=this.deepClone(e)},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该菜单, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功"}),t.getList()}))}))},insertData:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.menu_id=void 0,e.form.status=Boolean(e.form.status),Object(s["a"])(e.form).then((function(t){e.$message({message:"添加成功",type:"success"}),e.getList(),e.Dialog=!1})))}))},updateData:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(s["d"])(e.form).then((function(t){e.getList(),e.$message({message:"修改成功",type:"success"}),e.Dialog=!1}))}))}}},h=v,b=(r("3972"),Object(p["a"])(h,a,n,!1,null,"ddd3cd2e",null));t["default"]=b.exports},fa31:function(e,t,r){},fc05:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"模板名称"}},[r("el-input",{attrs:{placeholder:"请输入模板名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:dockerfile:add",expression:"'service:dockerfile:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"permission",rawName:"v-permission",value:"service:dockerfile:all",expression:"'service:dockerfile:all'"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"dockerfile名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"dockerfile描述",align:"center",prop:"desc","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建者",align:"center",prop:"operator","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"修改时间",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.updated_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{slot:"reference",size:"small",type:"text",icon:"el-icon-tickets"},on:{click:function(r){return e.handleTemplate(t.row)}},slot:"reference"},[e._v("查看模板")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:dockerfile:update",expression:"'service:dockerfile:update'"}],attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"service:dockerfile:delete",expression:"'service:dockerfile:delete'"}],attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"page-block"},[r("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{width:"800px",title:e.insertDialog?"新增代码dockerfile配置":"修改代码dockerfile配置",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"dockerfile名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",autocomplete:"off",placeholder:"请输入dockerfile名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"dockerfile模板",prop:"template"}},[r("div",{staticClass:"codeEditBox"},[r("editor",{staticClass:"editor",attrs:{lang:"dockerfile",options:e.editorOptions,theme:"chrome",width:"100%"},on:{input:e.changeTemplate,init:e.editorInit},model:{value:e.form.template,callback:function(t){e.$set(e.form,"template",t)},expression:"form.template"}})],1)]),e.templateVariable.length?r("el-form-item",{attrs:{label:"模板变量",prop:"desc"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.templateVariable,border:""}},[r("el-table-column",{attrs:{prop:"keyword",label:"变量",width:"180"}}),r("el-table-column",{attrs:{prop:"label",label:"描述"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"dockerfile描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e.insertDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]):e._e(),e.updateDialog?r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")]):e._e()],1)],1),r("el-dialog",{attrs:{width:"800px",title:"dockerfile模板",visible:e.templateDialog},on:{"update:visible":function(t){e.templateDialog=t}}},[r("editor",{attrs:{lang:"dockerfile",options:e.editorOptions,theme:"chrome",width:"100%",height:"450px","aria-disabled":""},on:{init:e.editorInit},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.templateDialog=!1}}},[e._v("确 定")])],1)],1)],1)},n=[],i=r("1da1"),s=(r("ac1f"),r("466d"),r("96cf"),r("7c9e")),o=r.n(s),l=(r("061c"),r("53d2")),c=r("ca86"),u={components:{editor:o.a},data:function(){return{list:[],form:{},types:[],templateDialog:!1,template:"",dialog:!1,updateDialog:!1,insertDialog:!1,loading:!0,rules:{name:[{required:!0,trigger:"blur",message:"dockerfile名称不能为空"}],template:[{required:!0,trigger:"blur",message:"dockerfile模板不能为空"}]},editorOptions:{language:"dockerfile",enableBasicAutocompletion:!0,enableSnippets:!1,enableLiveAutocompletion:!0,tabSize:1,fontSize:14,showPrintMargin:!0},total:0,queryParams:{page:1,count:10,name:void 0},templateVariable:[],variables:{}}},computed:{},created:function(){this.getVariable(),this.getList()},methods:{editorInit:function(){r("95b8"),r("2099"),r("961b"),r("e367")},getVariable:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["g"])(e.queryParams);case 2:e.variables=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])(e.queryParams);case 2:r=t.sent,e.list=r.list,e.total=r.total,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},resetQuery:function(){this.queryParams={page:1,count:10,name:void 0}},handleSizeChange:function(e){this.loading=!0,this.queryParams.page=1,this.queryParams.count=e,this.getList()},handleCurrentChange:function(e){this.loading=!0,this.queryParams.page=e,this.getList()},handleTemplate:function(e){this.template=e.template,this.templateDialog=!0},handleAdd:function(){this.form={},this.insertDialog=!0,this.updateDialog=!1,this.dialog=!0},handleUpdate:function(e){this.insertDialog=!1,this.updateDialog=!0,this.form=this.deepClone(e),this.getTemplateVariable(this.form.template),this.dialog=!0},changeTemplate:function(e){this.getTemplateVariable(e)},getTemplateVariable:function(e){var t=/\{\w+}/g,r=e.match(t);this.templateVariable=[];var a={};for(var n in r){var i=r[n].substr(1,r[n].length-2);this.variables[i]&&!a[i]&&(a[i]=!0,this.templateVariable.push({keyword:i,label:this.variables[i]}))}},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该代码dockerfile, 是否继续?","提示",{type:"warning"}).then((function(){Object(c["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}))},insert:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(c["a"])(r).then((function(t){e.$message({message:"新增成功",type:"success"}),e.getList(),e.dialog=!1}))}}))},update:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.deepClone(e.form);Object(c["d"])(r).then((function(t){e.$message({message:"更新成功",type:"success"}),e.getList(),e.dialog=!1}))}}))}}},d=u,m=(r("6c00"),r("2877")),p=Object(m["a"])(d,a,n,!1,null,"54369762",null);t["default"]=p.exports}}]);